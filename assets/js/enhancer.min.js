var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var b=0,d={next:function(){if(b<a.length){var e=b++;return{value:c(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6-impl","es3");
var _setGlobalSettings={},_getGlobalSettings="darkMode listenerMode settingsMenus fullwidthMode moreActionMenu removeSettingsBtn disableDiscoverToggle hideSidebar hideBranding displayType removePreviews removePlaylists removeLongTracks removeUserActivity removeReposts tagsArray filter hiddenOutline profileImages disableUnfollower discoverModules".split(" "),getLocalStorage=function(a,c){chrome.storage.sync.get((void 0===c?null:c)||_getGlobalSettings,a)},setLocalStorage=function(a,c){chrome.storage.sync.set((void 0===
c?null:c)||_setGlobalSettings,a)},resetLocalStorage=function(a){chrome.storage.sync.remove(_getGlobalSettings,a)},_debugMode=0,_manifestData=chrome.runtime.getManifest(),_globalConfig={childList:!0},_altConfig={attributes:!0,childList:!0,subtree:!0},_body=document.querySelector("body"),_app=document.querySelector("#app"),_defaultFilter={artists:[],tracks:[]},_defaultMenus={hideFooterMenu:"off",hideHeaderMenu:"off"},skipPrevious=!1,oldLocation=location.href;_debugMode&&console.log("-=- SCE debugMode ACTIVE -=-");
var matched=function(a){return{on:function(){return matched(a)},otherwise:function(){return a}}},match=function(a){return{on:function(c,b){return c(a)?matched(b(a)):match(a)},otherwise:function(c){return c(a)}}},insertAfter=function(a,c){c.parentNode.insertBefore(a,c.nextSibling)},relativeTime=function(a){a=Math.floor(Date.now()/1E3)-a;return 60>a?a+" sec ago":3600>a?Math.round(a/60)+" mins ago":86400>a?Math.round(a/3600)+" hrs ago":2592E3>a?Math.round(a/86400)+" days ago":31536E3>a?Math.round(a/
2592E3)+" months ago":Math.round(a/31536E3)+" yrs ago"},runObserver=function(a,c,b){var d=b||!1;b=d?_altConfig:_globalConfig;window.observer=new MutationObserver(function(a){if(d)c();else{for(var b=a.length,e=!1,g,h=0;h<b;h++)if(g=a[h],"childList"===g.type&&g.addedNodes.length){e=!0;break}e&&c()}});observer.observe(a,b)},getCookie=function(a){a+="=";for(var c=document.cookie.split(";"),b=c.length,d=0;d<b;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(a))return e.substring(a.length,
e.length)}return""},_userID=getCookie("i"),_userName=getCookie("p"),fetchFile=function(a,c,b){var d=new XMLHttpRequest;d.open("GET",chrome.extension.getURL(c),!0);d.onload=function(){if(200===d.status&&(_debugMode&&console.log("function fetchFile: File fetched"),a.innerHTML=d.responseText,b))return b()};d.send()},disassembleSettings=function(){var a=document.querySelector("#sce-settings");a.classList.add("invisible");a.style.overflow="hidden";_app.classList.remove("g-filter-grayscale");setTimeout(function(){a.classList.remove("showBackground");
setTimeout(function(){a.remove();_body.classList.remove("g-overflow-hidden")},100)},300)},multiFollow=function(){for(var a=document.querySelectorAll(".userBadgeListItem"),c=a.length,b=0;b<c;b++)if(null===a[b].querySelector(".userBadgeListItem__checkbox")){var d=document.createElement("label"),e=document.createElement("input"),k=document.createElement("div");d.className="userBadgeListItem__checkbox";e.type="checkbox";e.className="sc-checkbox-input sc-visuallyhidden";k.className="sc-checkbox-check";
d.appendChild(e);d.appendChild(k);a[b].appendChild(d)}},stripLinkDomain=function(a){return a.replace("https://soundcloud.com/","")},massSelector=function(a){var c=function(){for(var b=document.querySelectorAll(".badgeList__item"),c=b.length,k=0;k<c;k++)b[k].querySelector("label.userBadgeListItem__checkbox input.sc-checkbox-input").checked=a};if(1==a)var b=setInterval(function(){document.querySelector(".collectionSection .badgeList.lazyLoadingList .loading")?(window.scrollTo(0,document.body.scrollHeight||
document.documentElement.scrollHeight),_debugMode&&console.log("Page scroll")):(clearInterval(b),window.scrollTo(0,0),c())},50);else c()},isPlaylistURL=function(a){a=a.split("/");for(var c=a.length,b=!1,d=0;d<c;d++)"sets"===a[d]&&(b=!0);return b},moreActionParentClassName=function(a){return"."+a.closest(".lazyLoadingList").querySelector("div > ul > li, ul > li").className.split(/\s+/)[0]},moreActionMenuContent=function(a){getLocalStorage(function(c){var b=document.querySelector(".moreActions div"),
d=a.querySelector(".playlistTrackCount")||a.querySelector(".compactTrackList__moreLink"),e=a.querySelector(".soundTitle__tagContent"),k=a.querySelector(".soundTitle__username, .chartTrack__username a, .playableTile__usernameHeading, .trackItem__username"),f=a.querySelector(".soundTitle__title, .chartTrack__title a, .playableTile__artworkLink, .trackItem__trackTitle"),g=document.querySelector("#sce-moreActions-group"),h=document.createElement("div");h.className="moreActions__group";h.id="sce-moreActions-group";
var q=function(){window.location.href=f.href+"/recommended"},l=function(a,b){b=void 0===b?null:b;if(!document.querySelector("#sce-"+a+"-button")){var c=document.createElement("button");c.type="button";c.id="sce-"+a+"-button";c.className="moreActions__button sc-button-medium sce-button-icon sce-button-"+a+"";"related"===a?(c.title="Go to related tracks",c.innerText="Related tracks"):"track"===a?isPlaylistURL(b.href)?(c.title="Click to blacklist this playlist",c.innerText="Blacklist playlist"):(c.title=
"Click to blacklist this track",c.innerText="Blacklist track"):(c.title="Click to blacklist this track's "+a+"",c.innerText="Blacklist "+a+"");"related"!==a&&c.setAttribute("data-item","artist"===a||"track"===a?b.href:b.innerText);"artist"===a&&(stripLinkDomain(k.href),h.appendChild(c))}},n=!1,t=!1,w=!1,r=!1;c.moreActionMenu&&("on"===c.moreActionMenu.relatedActionMenu&&(n=!0),"on"===c.moreActionMenu.tagActionMenu&&(t=!0),"on"===c.moreActionMenu.artistActionMenu&&(w=!0),"on"===c.moreActionMenu.trackActionMenu&&
(r=!0));n||d||l("related");!t&&e&&l("hashtag",e);!w&&k&&l("artist",k);!r&&f&&l("track",f);g||h.hasChildNodes()&&b.appendChild(h);c=document.querySelector("#sce-related-button");b=document.querySelector("#sce-hashtag-button");d=document.querySelector("#sce-artist-button");e=document.querySelector("#sce-track-button");!n&&c&&(c.removeEventListener("click",q),c.addEventListener("click",q));!t&&b&&addTagToFilter(b);!w&&d&&addItemToFilter(d,"artists");!r&&e&&addItemToFilter(e,"tracks")})},addItemToFilter=
function(a,c){var b=function(){getLocalStorage(function(b){var d,k=a.getAttribute("data-item"),f=stripLinkDomain(k);b=b.filter||_defaultFilter;var g=Math.floor(Date.now()/1E3),f={slug:f,time:g};"artists"===c?(b.artists.push(f),d=document.querySelectorAll(".soundTitle__username, .chartTrack__username a, .playableTile__usernameHeading, .trackItem__username")):"tracks"===c&&(b.tracks.push(f),d=document.querySelectorAll(".soundTitle__title, .chartTrack__title a, .playableTile__artworkLink, .trackItem__trackTitle"));
setLocalStorage(function(){if(chrome.runtime.lastError)alert("Error settings:\n\n"+chrome.runtime.lastError);else{document.querySelector(".sc-button-more.sc-button.sc-button-active").click();for(var a=d.length,b=0;b<a;b++)if(d[b].href===k){var c=moreActionParentClassName(d[b]);d[b].closest(c).remove()}}},{filter:b})})};a.removeEventListener("click",b);a.addEventListener("click",b)},addTagToFilter=function(a){var c=function(){getLocalStorage(function(b){var c=a.getAttribute("data-item");b=b.tagsArray||
[];b.push(c);setLocalStorage(function(){var a=document.querySelectorAll(".soundTitle__tagContent"),b=a.length;if(chrome.runtime.lastError)alert("Error settings:\n\n"+chrome.runtime.lastError);else{document.querySelector(".sc-button-more.sc-button.sc-button-active").click();for(var d=0;d<b;d++)if(a[d].innerText.toUpperCase()===c.toUpperCase()){var g=moreActionParentClassName(a[d]);a[d].closest(g).remove()}}},{tagsArray:b})},["tagsArray"])};a.removeEventListener("click",c);a.addEventListener("click",
c)},eliminateDuplicates=function(a){var c,b=[],d=a.length,e={};for(c=0;c<d;c++)e[a[c]]=0;for(c in e)b.push(c);return b},exportimportInit=function(a){a=document.querySelector('#sce-import input[type="file"]');document.querySelector("#sce-export a").addEventListener("click",function(){getLocalStorage(function(a){var b=new Blob([JSON.stringify(a,null,"\t")],{type:"application/json"});a=document.createElement("a");b=window.URL.createObjectURL(b);document.body.appendChild(a);a.style="display: none";a.href=
b;a.download="SCEnhancer.json";a.click();window.URL.revokeObjectURL(b)})});var c=function(a){a=JSON.parse(a.target.result);for(var c=Object.keys(a),b=c.length,k={},f=0;f<b;f++)switch(c[f]){case "discoverModules":Object.keys(a.discoverModules);var g={},h;for(h in a.discoverModules)isNaN(h)||(g[h]="1"==a.discoverModules[h]?"1":"0");k.discoverModules=g;break;case "displayType":k.displayType="list"===a.displayType||"grid"===a.displayType?a.displayType:"default";break;case "filter":for(var g=[a.filter.artists,
a.filter.tracks],q=g.length,l={},n=0;n<q;n++){var t=[],w;for(w in g[n]){var r=g[n][w],B=r.slug,v=r.time;if(B){v||(r.time=Math.floor(Date.now()/1E3));for(var v=t.length,y=0,u=0;u<v;u++)t[u].slug===B&&(y=1);0==y&&t.push(r)}}0==n?l.artists=t:l.tracks=t}k.filter=l;break;case "tagsArray":g=a.tagsArray.length;q=[];for(l=0;l<g;l++)q.push(a.tagsArray[l].toLowerCase());k.tagsArray=eliminateDuplicates(q);break;case "moreActionMenu":var g={},z;for(z in a.moreActionMenu)g[z]="on"==a.moreActionMenu[z]?a.moreActionMenu[z]:
"off";k.moreActionMenu=g;break;default:g=a[c[f]],"on"!=g&&(g="off"),k[c[f]]=g}setLocalStorage(function(){chrome.runtime.lastError?alert("Error settings:\n\n"+chrome.runtime.lastError):location.reload()},k)};a.addEventListener("change",function(a){a=a.target.files;var b=new FileReader;b.onload=c;b.readAsText(a[0])},!1)},manageFooterEnhancerButton=function(a){a=void 0===a?!1:a;var c=document.querySelector("#enhancer-btn"),b=document.querySelector(".playControls__inner");!0===a?c&&(c.remove(),_body.removeAttribute("settings-button"),
settingsMenu()):c||(_debugMode&&console.log("-> SCEbutton (Bottom) rendered"),_body.setAttribute("settings-button",""),a=document.createElement("div"),c=document.createElement("button"),a.id="enhancer-container",c.className="sc-enhancer sc-button sc-button-medium sc-button-responsive",c.id="enhancer-btn",c.tabindex="0",c.innerText="SCEnhancer",a.appendChild(c),b.appendChild(a),settingsMenu())},manageHeaderEnhancerButton=function(a){a=void 0===a?!1:a;var c=document.querySelector(".profileMenu__list.profileMenu__enhancer.sc-list-nostyle"),
b=document.querySelector(".header__userNavUsernameButton");if(!0===a)b.removeEventListener("click",manageHeaderEnhancerButton),c&&c.remove(),settingsMenu();else if(!c){b.removeEventListener("click",manageHeaderEnhancerButton);if(document.querySelector(".dropdownMenu.g-z-index-header-menu")){_debugMode&&console.log("-> SCEbutton (Top) rendered");a=document.querySelector(".profileMenu");var c=document.createElement("ul"),d=document.createElement("li"),e=document.createElement("a");c.className="profileMenu__list profileMenu__enhancer sc-enhancer sc-list-nostyle";
d.className="profileMenu__item";e.className="profileMenu__link profileMenu__enhancerMenu";e.innerText="SCEnhancer";d.appendChild(e);c.appendChild(d);a.appendChild(c)}settingsMenu();var k=setInterval(function(){document.querySelector(".profileMenu__list.profileMenu__enhancer.sc-list-nostyle")||(settingsMenu(),clearInterval(k),b.addEventListener("click",manageHeaderEnhancerButton))},100)}},settingsInit=function(){_debugMode&&console.log("callback settingsInit: Initializing");for(var a=document.querySelector("#darkMode"),
c=document.querySelector("#listenerMode"),b=document.querySelector("#fullwidthMode"),d=document.querySelector("#profileImages"),e=document.querySelector("#hideSidebar"),k=document.querySelector("#hideBranding"),f=document.querySelector("#hideHeaderMenu"),g=document.querySelector("#hideFooterMenu"),h=document.querySelectorAll('input[name="displayType"]'),q=document.querySelector("#removePreviews"),l=document.querySelector("#removePlaylists"),n=document.querySelector("#removeLongTracks"),t=document.querySelector("#removeUserActivity"),
w=document.querySelector("#removeReposts"),r=document.querySelector("#relatedActionMenu"),B=document.querySelector("#tagActionMenu"),v=document.querySelector("#artistActionMenu"),y=document.querySelector("#trackActionMenu"),u=document.querySelector("#hiddenOutline"),z=document.querySelector("#disableUnfollower"),D=document.querySelector("#disableDiscoverToggle"),A=document.querySelector("#sce-settings-reset"),x=document.querySelectorAll(".sce-close-settings"),E=x.length,H=[a,c,b,d,e,k,f,g,h[0],h[1],
h[2],q,l,n,t,w,r,B,v,y,u,z,D],G=0;G<E;G++)x[G].addEventListener("click",function(){return disassembleSettings()});document.addEventListener("mousedown",function(a){var c=null===a?event:a;1!==c.which&&0!==c.button&&1!==c.button||"sce-settings"!==a.target.id||disassembleSettings()});A.addEventListener("click",function(){"true"===A.getAttribute("warning")?resetLocalStorage(function(){return location.reload()}):(A.setAttribute("warning",!0),A.innerText="Are you sure you want to reset?",setTimeout(function(){A.setAttribute("warning",
!1);A.innerText="Reset all SCEnhancer settings"},5E3))});getLocalStorage(function(m){"on"===m.darkMode&&(a.checked=!0);"on"===m.listenerMode&&(c.checked=!0);"on"===m.fullwidthMode&&(b.checked=!0);"on"===m.profileImages&&(d.checked=!0);"on"===m.hideSidebar&&(e.checked=!0);"on"===m.hideBranding&&(k.checked=!0);m.settingsMenus?("on"===m.settingsMenus.hideHeaderMenu&&(f.checked=!0),"on"===m.settingsMenus.hideFooterMenu&&(g.checked=!0)):setLocalStorage(function(){_debugMode&&console.log("-> Setting updated: settingsMenus (Default)")},
{settingsMenus:_defaultMenus});"list"===m.displayType?h[1].checked=!0:"grid"===m.displayType?h[2].checked=!0:h[0].checked=!0;"on"===m.removePreviews&&(q.checked=!0);"on"===m.removePlaylists&&(l.checked=!0);"on"===m.removeLongTracks&&(n.checked=!0);"on"===m.removeUserActivity&&(t.checked=!0);"on"===m.removeReposts&&(w.checked=!0);m.moreActionMenu&&("on"===m.moreActionMenu.relatedActionMenu&&(r.checked=!0),"on"===m.moreActionMenu.tagActionMenu&&(B.checked=!0),"on"===m.moreActionMenu.artistActionMenu&&
(v.checked=!0),"on"===m.moreActionMenu.trackActionMenu&&(y.checked=!0));"on"===m.hiddenOutline&&(u.checked=!0);"on"===m.disableUnfollower&&(z.checked=!0);"on"===m.disableDiscoverToggle&&(D.checked=!0)});var F=function(a,c){"on"!==a&&document.querySelectorAll(".lazyLoadingList > ul, .lazyLoadingList > div > ul").forEach(function(a){a.childNodes.forEach(function(a){var b=a.getAttribute("data-type");b&&b===c&&(a.classList.remove("hidden"),a.removeAttribute("data-type"),a.removeAttribute("data-skip"))})});
frontEndStreamManipulation(!0)},p=function(a,c,b,d){b=void 0===b?null:b;d=void 0===d?null:d;getLocalStorage(function(C){var e={},f=c.split("."),h="on",g=C[c];c.match(/[.]/)&&(g=C[f[0]][f[1]]);"on"===g&&(h="off");c.match(/[.]/)?(e[f[0]]=C[f[0]],"settingsMenus"===f[0]?"hideHeaderMenu"===f[1]?e[f[0]].hideHeaderMenu=h:"hideFooterMenu"===f[1]&&(e[f[0]].hideFooterMenu=h):"moreActionMenu"===f[0]&&("relatedActionMenu"===f[1]?e[f[0]].relatedActionMenu=h:"tagActionMenu"===f[1]?e[f[0]].tagActionMenu=h:"artistActionMenu"===
f[1]?e[f[0]].artistActionMenu=h:"trackActionMenu"===f[1]&&(e[f[0]].trackActionMenu=h))):e[c]="displayType"===c?a.value:h;setLocalStorage(function(){_debugMode&&console.log(e);if("displayType"===c)_body.setAttribute("displaytype",a.value);else if("hideHeaderMenu"===f[1]||"hideFooterMenu"===f[1])"on"===h?b(!0):b();else if(d)b(h,d);else{var C=c.toLowerCase();"on"===h?_body.setAttribute(C,""):_body.removeAttribute(C)}},e)})};H.forEach(function(m){m.addEventListener("change",function(){match(m).on(function(c){return c===
a},function(a){return p(a,"darkMode")}).on(function(a){return a===c},function(a){return p(a,"listenerMode")}).on(function(a){return a===b},function(a){return p(a,"fullwidthMode")}).on(function(a){return a===d},function(a){return p(a,"profileImages")}).on(function(a){return a===e},function(a){return p(a,"hideSidebar")}).on(function(a){return a===k},function(a){return p(a,"hideBranding")}).on(function(a){return a===f},function(a){return p(a,"settingsMenus.hideHeaderMenu",manageHeaderEnhancerButton)}).on(function(a){return a===
g},function(a){return p(a,"settingsMenus.hideFooterMenu",manageFooterEnhancerButton)}).on(function(a){return a===h[0]},function(a){return p(a,"displayType")}).on(function(a){return a===h[1]},function(a){return p(a,"displayType")}).on(function(a){return a===h[2]},function(a){return p(a,"displayType")}).on(function(a){return a===q},function(a){return p(a,"removePreviews",F,"preview")}).on(function(a){return a===l},function(a){return p(a,"removePlaylists",F,"preview")}).on(function(a){return a===n},
function(a){return p(a,"removeLongTracks",F,"long")}).on(function(a){return a===t},function(a){return p(a,"removeUserActivity",F,"yours")}).on(function(a){return a===w},function(a){return p(a,"removeReposts",F,"repost")}).on(function(a){return a===r},function(a){return p(a,"moreActionMenu.relatedActionMenu")}).on(function(a){return a===B},function(a){return p(a,"moreActionMenu.tagActionMenu")}).on(function(a){return a===v},function(a){return p(a,"moreActionMenu.artistActionMenu")}).on(function(a){return a===
y},function(a){return p(a,"moreActionMenu.trackActionMenu")}).on(function(a){return a===u},function(a){return p(a,"hiddenOutline")}).on(function(a){return a===z},function(a){return p(a,"disableUnfollower")}).on(function(a){return a===D},function(a){return p(a,"disableDiscoverToggle")})})})},filterInit=function(){_debugMode&&console.log("callback filterInit: Initializing");var a=document.querySelector("#artist-blacklist"),c=document.querySelector("#track-blacklist"),b=document.querySelector("#playlist-blacklist"),
d=document.querySelector("#skipTags");getLocalStorage(function(a){null!=a.tagsArray&&(d.value=a.tagsArray);insignia(d,{delimiter:",",deletion:!0});a=document.querySelector(".nsg-tags");runObserver(a,function(){for(var a=document.querySelectorAll(".nsg-tag"),c=a.length,b=[],d=0;d<c;d++)b.push(a[d].innerText);setLocalStorage(function(){chrome.runtime.lastError&&alert("Error while saving settings:\n\n"+chrome.runtime.lastError);_debugMode&&console.log("Tag array saved: "+b)},{tagsArray:b})},!0)});var e=
function(a){a=a.split("/");var c=a[0];"sets"==a[1]?c=a[2]:a[1]&&(c=a[1]);c=c.replace(/-/g," ");return c=c.replace(/_/g," ")},k=function(a,c){getLocalStorage(function(b){var d=[],f=0,n=function(a){for(var c=[],b=0;b<f;b++)!0===a&&isPlaylistURL(d[b].slug)&&c.push(d[b]),!1===a&&(isPlaylistURL(d[b].slug)||c.push(d[b]));d=c},h=function(a,c,b){for(var d=a.length;d--;)a[d]&&a[d].hasOwnProperty(c)&&a[d][c]===b&&a.splice(d,1);return a};b.filter&&(d=b.filter.tracks,f=d.length,"artists"==c&&b.filter.artists?
(d=b.filter.artists,f=d.length):"tracks"==c&&b.filter.tracks?n(!1):n(!0));if(0===f)b=document.createElement("span"),b.innerHTML="No "+c+" has been filtered!",a.appendChild(b);else for(b={i:0};b.i<f;b={i:b.i,_listItemDelete:b._listItemDelete},b.i++){var n=document.createElement("li"),k=document.createElement("span"),r=document.createElement("a"),g=document.createElement("div"),v=document.createElement("span");b._listItemDelete=document.createElement("span");var y=b.i+1;k.className="sce-filter-item-order";
k.innerText="#"+y;g.className="sce-filter-actions";r.className="sce-filter-item-name";r.href="https://soundcloud.com/"+d[b.i].slug;r.innerText=e(d[b.i].slug);r.target="_blank";v.innerText=relativeTime(d[b.i].time);v.className="sce-filter-option";b._listItemDelete.className="sce-filter-option-remove";n.appendChild(k);n.appendChild(r);g.appendChild(v);g.appendChild(b._listItemDelete);n.appendChild(g);a.appendChild(n);b._listItemDelete.addEventListener("click",function(a){return function(){getLocalStorage(function(b){b=
b.filter;"artists"===c?h(b.artists,"slug",d[a.i].slug):h(b.tracks,"slug",d[a.i].slug);setLocalStorage(function(){a._listItemDelete.closest("li").remove();for(var b=document.querySelectorAll(".filter-container"),d=b.length,e=0;e<d;e++)if(!b[a.i].hasChildNodes()){var f=document.createElement("span");f.innerHTML="No "+c+" has been filtered!";b[e].appendChild(f)}},{filter:b})},["filter"])}}(b))}})};k(a,"artists");k(c,"tracks");k(b,"playlists")},readyStateCheck=function(){setAttributes();settingsSetup();
injectedJavascript()};document.addEventListener("readystatechange",readyStateCheck);setInterval(function(){location.href!=oldLocation&&(_debugMode&&console.log("-=- NEW PAGE LOADED -=-"),oldLocation=location.href,readyStateCheck())},100);
var setAttributes=function(){_debugMode&&console.log("function setAttributes: Initializing");getLocalStorage(function(a){"on"===a.darkMode&&_body.setAttribute("darkmode","");"on"===a.listenerMode&&_body.setAttribute("listenermode","");"on"===a.fullwidthMode&&_body.setAttribute("fullwidthmode","");"on"===a.profileImages&&_body.setAttribute("profileimages","");"on"===a.hideSidebar&&_body.setAttribute("hidesidebar","");"on"===a.hideBranding&&_body.setAttribute("hidebranding","");"list"===a.displayType?
_body.setAttribute("displaytype","list"):"grid"===a.displayType?_body.setAttribute("displaytype","grid"):_body.setAttribute("displaytype","default");"on"===a.hiddenOutline&&_body.setAttribute("hiddenoutline","")})};setAttributes();
var settingsSetup=function(){_debugMode&&console.log("function settingsSetup: Initializing");var a=document.querySelector("#stream-controller"),c=document.querySelector("#version-display"),b=document.querySelector(".playControls");document.querySelector(".playControls__inner");var d=document.querySelector(".announcements.g-z-index-fixed-top"),e=document.querySelector(".header__userNavUsernameButton"),k=document.querySelector(".header__logo.left");b.className="playControls g-z-index-header m-visible";
d.className="announcements g-z-index-fixed-top m-offset";k.id="sce-logo";c||(_debugMode&&console.log("-> Branding rendered"),c=document.createElement("span"),c.id="version-display",c.innerText=_manifestData.version,k.appendChild(c));getLocalStorage(function(b){"undefined"!==typeof b.settingsMenus&&"on"===b.settingsMenus.hideFooterMenu||manageFooterEnhancerButton();"undefined"!==typeof b.settingsMenus&&"on"===b.settingsMenus.hideHeaderMenu||e.addEventListener("click",manageHeaderEnhancerButton);var c=
setInterval(function(){var a=document.querySelector("ul.profileTabs.g-tabs");if(a&&!document.querySelector("#profile-tab-like")){_debugMode&&console.log("-> Like shortcut rendered");clearInterval(c);var b=a.querySelector(".g-tabs-link:first-child").getAttribute("href"),d=document.createElement("li"),e=document.createElement("a");d.className="g-tabs-item";d.id="profile-tab-like";e.className="g-tabs-link";e.href=b+"/likes";e.innerText="Likes";d.appendChild(e);a.appendChild(d)}},100);if("on"!=b.disableDiscoverToggle&&
"https://soundcloud.com/discover"==location.href)var d=setInterval(function(){var a=document.querySelector("div.modularHome.lazyLoadingList ul.lazyLoadingList__list");if(a){clearInterval(d);var b=function(){getLocalStorage(function(b){_debugMode&&console.log("function discoverModuleHider: Running");for(var c=a.querySelectorAll(".selectionModule"),d=c.length,e={i:0};e.i<d;e={_moduleSwitch:e._moduleSwitch,i:e.i},e.i++){var f=b.discoverModules||{},k=1==f[e.i]?"hidden":"shown",h=c[e.i].querySelector("h2.selectionModule__titleText"),
g=h.querySelector("a.hide-discover-section");c[e.i].setAttribute("state",k);g||(k=1==f[e.i]?0:1,f=1==f[e.i]?"Show this section":"Hide this section",g=document.createElement("a"),g.className="hide-discover-section",g.innerText=f,g.setAttribute("section-id",e.i),g.setAttribute("section-state",k),h.appendChild(g),e._moduleSwitch=document.querySelector('.hide-discover-section[section-id="'+e.i+'"]'),e._moduleSwitch.addEventListener("click",function(a){return function(){getLocalStorage(function(b){var c=
a._moduleSwitch.getAttribute("section-id"),d=a._moduleSwitch.getAttribute("section-state"),e=b.discoverModules||{};e[c]=d;setLocalStorage(function(){if(chrome.runtime.lastError)alert("Error while saving settings:\n\n"+chrome.runtime.lastError);else{var b=1==e[c]?"Show this section":"Hide this section",d=1==e[a.i]?"hidden":"shown",f=1==e[c]?0:1,k=a._moduleSwitch.closest(".selectionModule");a._moduleSwitch.innerText=b;a._moduleSwitch.setAttribute("section-state",f);k.setAttribute("state",d)}},{discoverModules:e})})}}(e)))}})};
b();runObserver(a,b)}},100);if("https://soundcloud.com/stream"==location.href)var f=setInterval(function(){var c=document.querySelector(".stream__header");if(c&&(clearInterval(f),!a)){var d=document.createElement("div"),e=document.createElement("div"),k=document.createElement("h3"),g=document.createElement("ul"),h=document.createElement("li"),l=document.createElement("li"),u=document.createElement("li");d.className="stream__controls";d.id="stream-controller";e.className="listDisplayToggle g-flex-row-centered";
k.className="listDisplayToggleTitle sc-text-light sc-type-medium";k.innerText="View";g.className="listDisplayToggle sc-list-nostyle g-flex-row-centered";h.className="listDisplayToggle setting-display-tile default-icon";h.title="Default";h.setAttribute("data-id","default");l.className="listDisplayToggle setting-display-tile list-icon";l.title="Compact";l.setAttribute("data-id","list");u.className="listDisplayToggle setting-display-tile grid-icon";u.title="Grid";u.setAttribute("data-id","grid");e.appendChild(k);
g.appendChild(h);g.appendChild(l);g.appendChild(u);e.appendChild(g);d.appendChild(e);c.appendChild(d);var q=document.querySelector(".listDisplayToggle.setting-display-tile.default-icon"),D=document.querySelector(".listDisplayToggle.setting-display-tile.list-icon"),A=document.querySelector(".listDisplayToggle.setting-display-tile.grid-icon");"list"===b.displayType?D.classList.add("active"):"grid"===b.displayType?A.classList.add("active"):q.classList.add("active");for(var x=document.querySelectorAll(".listDisplayToggle.setting-display-tile"),
E=x.length,c={i:0};c.i<E;c={i:c.i},c.i++)x[c.i].addEventListener("click",function(a){return function(){for(var b=x[a.i].getAttribute("data-id"),c=0;c<E;c++)x[c].classList.remove("active");"list"===b?(_body.setAttribute("displaytype","list"),D.classList.add("active")):"grid"===b?(_body.setAttribute("displaytype","grid"),A.classList.add("active")):(_body.setAttribute("displaytype","default"),q.classList.add("active"));setLocalStorage(function(){chrome.runtime.lastError&&alert("Error while saving settings:\n\n"+
chrome.runtime.lastError);_debugMode&&console.log("-> Display mode saved: "+b)},{displayType:b})}}(c))}},100);if("https://soundcloud.com/you/following"==location.href&&"on"!==b.disableUnfollower)var k=setInterval(function(){var a=document.querySelector(".collectionSection__list .lazyLoadingList.badgeList ul.lazyLoadingList__list");if(a){clearInterval(k);var b=document.querySelector(".collectionSection__top");if(null==document.querySelector("#mass-unfollow")){var c=document.createElement("div"),d=
document.createElement("div"),e=document.createElement("h3"),f=document.createElement("button"),g=document.createElement("button"),h=document.createElement("button");c.className="stream__controls";c.id="mass-unfollow";d.className="g-flex-row-centered";e.className="sc-text-light sc-type-medium margin-spacing";e.innerText="Options:";f.className="sc-button margin-spacing";f.id="confirm-unfollow-button";f.innerText="Mass unfollow";g.className="sc-button margin-spacing";g.id="undo-unfollow-button";g.innerText=
"Reset selection";h.className="sc-button";h.id="all-unfollow-button";h.innerText="Select all";d.appendChild(e);d.appendChild(f);d.appendChild(g);d.appendChild(h);c.appendChild(d);insertAfter(c,b);b.style.margin="0px"}multiFollow();runObserver(a,multiFollow);var l=document.querySelector("#confirm-unfollow-button"),a=document.querySelector("#undo-unfollow-button"),b=document.querySelector("#all-unfollow-button");l.addEventListener("click",function(){for(var a=0,b=document.querySelectorAll(".badgeList__item"),
c=b.length,d=0;d<c;d++)1==b[d].querySelector("label.userBadgeListItem__checkbox input.sc-checkbox-input").checked&&(b[d].querySelector(".userBadgeListItem .userBadgeListItem__action button.sc-button-follow").click(),a++);l.innerText=1===a?"1 account got unfollowed!":a+" accounts got unfollowed!";setTimeout(function(){return l.innerText="Mass unfollow"},3E3)});a.addEventListener("click",function(){return massSelector(!1)});b.addEventListener("click",function(){return massSelector(!0)})}},100)})},renderSettings=
function(){_debugMode&&console.log("function renderSettings: Initializing");_body.className="g-overflow-hidden";_body.style.paddingRight="0px";_app.className="g-filter-grayscale";var a=document.createElement("div"),c=document.createElement("button"),b=document.createElement("div"),d=document.createElement("div"),e=document.createElement("h1"),k=document.createElement("span"),f=document.createElement("ul"),g=document.createElement("li"),h=document.createElement("li"),q=document.createElement("li"),
l=document.createElement("li"),n=document.createElement("ul"),t=document.createElement("li"),w=document.createElement("label"),r=document.createElement("input"),B=document.createElement("li"),v=document.createElement("a"),y=document.createElement("a"),u=document.createElement("a"),z=document.createElement("a"),D=document.createElement("a"),A=document.createElement("a"),x=document.createElement("div"),E=document.createElement("div"),H=document.createElement("div"),G=document.createElement("div"),F=
document.createElement("div"),p=document.createElement("hr"),m=document.createElement("span"),C=document.createElement("a");a.id="sce-settings";a.className="modal g-z-index-modal-background g-opacity-transition g-z-index-overlay modalWhiteout showBackground invisible";a.style.paddingRight="0px";a.style.outline="none";a.style.overflow="hidden";a.tabindex="-1";c.className="modal__closeButton sce-close-settings";c.title="Close";c.type="button";c.innerText="Close";b.className="modal__modal sc-border-box g-z-index-modal-content";
d.className="modal__content";e.id="sce-settings-title";e.className="g-modal-title-h1 sc-truncate";e.innerText="SoundCloud Enhancer "+_manifestData.version;k.className="credits";k.innerHTML="Made with <span class='heart'>&hearts;</span> in Denmark by <a href='https://twitter.com/DapperBenji' target='_blank'>@DapperBenji</a>.";f.id="tab-container";f.className="g-tabs g-tabs-small";g.className="g-tabs-item";h.className="g-tabs-item";q.className="g-tabs-item";l.className="g-tabs-item";n.className="g-side-items";
t.className="g-tabs-item";t.id="sce-import";r.className="hidden";r.type="file";r.accept=".json";B.className="g-tabs-item";B.id="sce-export";v.setAttribute("action","settings");v.className="tab g-tabs-link active";v.innerText="Settings";y.setAttribute("action","filter");y.className="tab g-tabs-link";y.innerText="Filter (beta)";u.setAttribute("action","changelog");u.className="tab g-tabs-link";u.innerText="Changelog";z.setAttribute("action","about");z.className="tab g-tabs-link";z.innerText="About";
D.className="g-tabs-link";D.innerText="Import";A.className="g-tabs-link";A.innerText="Export";x.id="sce-settings-content";E.className="tabPage";E.id="settings";E.style.display="block";H.className="tabPage";H.id="filter";G.className="tabPage";G.id="changelog";F.className="tabPage";F.id="about";m.className="donation";C.href="https://www.paypal.me/BenjaminBachJensen";C.innerText="Support the development - Buy me a cup of coffee ;)";C.target="_blank";x.appendChild(E);x.appendChild(H);x.appendChild(G);
x.appendChild(F);g.appendChild(v);h.appendChild(y);q.appendChild(u);l.appendChild(z);w.appendChild(D);w.appendChild(r);t.appendChild(w);B.appendChild(A);n.appendChild(t);n.appendChild(B);f.appendChild(g);f.appendChild(h);f.appendChild(q);f.appendChild(l);f.appendChild(n);m.appendChild(C);d.appendChild(e);d.appendChild(k);d.appendChild(f);d.appendChild(x);d.appendChild(p);d.appendChild(m);b.appendChild(d);a.appendChild(c);a.appendChild(b);_body.appendChild(a);setTimeout(function(){a.classList.remove("invisible")},
10);setTimeout(function(){a.style.overflow=null},400);fetchFile(E,"/assets/html/settings.html",settingsInit);fetchFile(H,"/assets/html/filter.html",filterInit);fetchFile(G,"/assets/html/changelog.html");fetchFile(F,"/assets/html/about.html");for(var I=document.querySelectorAll(".tab"),J=I.length,c={i:0};c.i<J;c={i:c.i},c.i++)I[c.i].addEventListener("click",function(a){return function(){for(var b=0;b<J;b++)I[b].className="tab g-tabs-link";I[a.i].className="tab g-tabs-link active";for(var b=document.querySelectorAll(".tabPage"),
c=b.length,d=0;d<c;d++)b[d].style.display="none";b=I[a.i].getAttribute("action");document.getElementById(b).style.display="block"}}(c));getLocalStorage(exportimportInit)},settingsMenu=function(){_debugMode&&console.log("function settingsMenu: Initializing");for(var a=document.querySelectorAll(".sc-enhancer"),c=a.length,b=0;b<c;b++)a[b].removeEventListener("click",renderSettings),a[b].addEventListener("click",renderSettings)},runFilters=function(){getLocalStorage(function(a){for(var c=["tag","artist",
"track"],b=c.length,d={filter:0};d.filter<b;d={filter:d.filter},d.filter++){var e=null,k=null,f=function(a,b,c){stripLinkDomain(b.href)===c.slug&&a()};switch(c[d.filter]){case "tag":e=document.querySelectorAll(".soundTitle__tagContent");a.tagsArray&&(k=a.tagsArray);f=function(a,b,c){b.innerText.toUpperCase()==c.toUpperCase()&&a(c)};break;case "artist":e=document.querySelectorAll(".soundTitle__username");a.filter&&a.filter.artists&&(k=a.filter.artists);break;case "track":e=document.querySelectorAll(".soundTitle__title"),
a.filter&&a.filter.tracks&&(k=a.filter.tracks)}if(e&&k)for(var g=e.length,h=k.length,q=0;q<g;q++)for(var l={},n=0;n<h;l={_parentElement:l._parentElement},n++){var t=moreActionParentClassName(e[q]);l._parentElement=e[q].closest(t);f(function(a,b){return function(d){d=void 0===d?null:d;a._parentElement.setAttribute("data-skip","true");a._parentElement.setAttribute("data-type","custom_filter");d?a._parentElement.setAttribute("banned-"+c[b.filter]+"",d):a._parentElement.setAttribute("banned-"+c[b.filter]+
"","");a._parentElement.classList.add("hidden")}}(l,d),e[q],k[n])}}},["filter","tagsArray"])},hidePlaylists=function(){_debugMode&&console.log("function markPlaylists: Running");for(var a=document.querySelectorAll(".soundList__item .activity div.sound.streamContext"),c=a.length,b=0;b<c;b++)if(1==a[b].className.includes("playlist")){var d;d=a[b].querySelectorAll(".compactTrackList__listContainer .compactTrackList__item");if(5>d.length)d=d.length;else{var e=a[b].querySelector(".compactTrackList__moreLink");
d=e?e.innerText.replace(/\D/g,""):d.length}e=a[b].closest(".soundList__item");e.setAttribute("data-skip","true");e.setAttribute("data-type","playlist");e.setAttribute("data-count",d);e.classList.add("hidden")}},hidePreviews=function(){_debugMode&&console.log("function hidePreviews: Running");for(var a=document.querySelectorAll(".sc-snippet-badge.sc-snippet-badge-medium.sc-snippet-badge-grey"),c=a.length,b=0;b<c;b++)if(a[b].innerHTML){var d=a[b].closest(".soundList__item");d.setAttribute("data-skip",
"true");d.setAttribute("data-type","preview");d.classList.add("hidden")}},hideReposts=function(){_debugMode&&console.log("function hideReposts: Running");for(var a=document.querySelectorAll(".soundContext__repost"),c=a.length,b=0;b<c;b++){var d=a[b].closest(".soundList__item");d.setAttribute("data-skip","true");d.setAttribute("data-type","repost");d.classList.add("hidden")}},checkCanvas=function(){_debugMode&&console.log("function checkCanvas: Running");for(var a=document.querySelectorAll(".sound__waveform .waveform .waveform__layer.waveform__scene"),
c=a.length,b=0;b<c;b++)for(var d=a[b].querySelectorAll("canvas.g-box-full.sceneLayer"),e=d.length,k=0;k<e;k++){var f=d[d.length-1],f=f.getContext("2d").getImageData(f.width-27,27,1,1).data;0===f[0]&&0===f[1]&&0===f[2]&&255===f[3]&&(f=a[b].closest(".soundList__item"),f.setAttribute("data-skip","true"),f.setAttribute("data-type","long"),f.classList.add("hidden"))}},checkUserActivity=function(){_debugMode&&console.log("function checkUserActivity: Running");for(var a=document.querySelectorAll(".soundContext__usernameLink"),
c=a.length,b=document.querySelector(".header__userNavUsernameButton").getAttribute("href"),d=0;d<c;d++){var e=a[d].getAttribute("href");b==e&&(e=a[d].closest(".soundList__item"),e.setAttribute("data-skip","true"),e.setAttribute("data-type","yours"),e.classList.add("hidden"))}},renderMoreActionCallback=function(a){if(!document.querySelector(".moreActions #sce-moreActions-group")){var c=moreActionParentClassName(a.target);a=a.target.closest(c);moreActionMenuContent(a)}},renderMoreAction=function(){for(var a=
document.querySelectorAll("button.sc-button-more.sc-button-small"),c=a.length,b=0;b<c;b++)a[b].removeEventListener("click",renderMoreActionCallback),a[b].addEventListener("click",renderMoreActionCallback)},frontEndStreamManipulation=function(a){!0===(void 0===a?!1:a)&&observer.disconnect();getLocalStorage(function(a){var b=document.querySelectorAll(".lazyLoadingList > ul, .lazyLoadingList > div > ul"),c=b.length;_debugMode&&console.log(b);renderMoreAction();runFilters();"on"===a.removePreviews&&hidePreviews();
"on"===a.removePlaylists&&hidePlaylists();"on"===a.removeReposts&&hideReposts();"on"===a.removeLongTracks&&checkCanvas();"on"===a.removeUserActivity&&checkUserActivity();for(var e=0;e<c;e++)runObserver(b[e],renderMoreAction),runObserver(b[e],runFilters),"on"===a.removePreviews&&runObserver(b[e],hidePreviews),"on"===a.removePlaylists&&runObserver(b[e],hidePlaylists),"on"===a.removeReposts&&runObserver(b[e],hideReposts),"on"===a.removeLongTracks&&runObserver(b[e],checkCanvas),"on"===a.removeUserActivity&&
runObserver(b[e],checkUserActivity)})},injectedJavascript=function(){_debugMode&&console.log("function injectedJavascript: Initializing");var a=document.querySelector(".playbackSoundBadge"),c=document.querySelector(".skipControl__next"),b=document.querySelector(".skipControl__previous"),d=setInterval(function(){document.querySelector(".l-fluid-fixed > .l-main .lazyLoadingList ul, .l-fixed-fluid > .l-main .lazyLoadingList > ul, .l-hero-fluid-fixed .l-main .lazyLoadingList, .l-collection .l-main .lazyLoadingList")&&
(clearInterval(d),frontEndStreamManipulation(),runObserver(a,function(){getLocalStorage(function(a){a=document.querySelectorAll(".soundList__item");for(var d=a.length,e=0;e<d;e++){var g=a[e].getAttribute("data-skip"),h=a[e].getAttribute("data-playlist");a[e].querySelector(".soundTitle__title span");if(1==a[e].querySelector(".activity div.sound.streamContext").className.includes("playing"))if(_debugMode&&console.log("Skip song?: "+g),"true"==g)if(b.addEventListener("click",function(){return skipPrevious=
!0}),1==h)if(g=a[e].getAttribute("data-count"),1==skipPrevious)for(h=0;h<g;h++)b.click();else for(h=0;h<g;h++)c.click();else 1==skipPrevious?b.click():c.click();else skipPrevious=!1}})}))},100)};

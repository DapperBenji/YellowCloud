var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var g=c++;return{value:b(g,a[g]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var g=a[d];g in c||(c[g]={});c=c[g]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6-impl","es3");
var _debugMode=0,_manifestData=chrome.runtime.getManifest(),_globalConfig={childList:!0},_altConfig={attributes:!0,childList:!0,subtree:!0},_body=document.querySelector("body"),_app=document.querySelector("#app"),_defaultFilter={artists:[],tracks:[]},_setGlobalSettings={},_getGlobalSettings="darkMode fullwidthMode moreActionMenu removeSettingsBtn disableDiscoverToggle hideSidebar hideBranding displayType removePreviews removePlaylists removeLongTracks removeUserActivity removeReposts tagsArray filter hiddenOutline profileImages disableUnfollower discoverModules".split(" "),
skipPrevious=!1,oldLocation=location.href;_debugMode&&console.log("-=- SCE debugMode ACTIVE -=-");
var matched=function(a){return{on:function(){return matched(a)},otherwise:function(){return a}}},match=function(a){return{on:function(b,c){return b(a)?matched(c(a)):match(a)},otherwise:function(b){return b(a)}}},insertAfter=function(a,b){b.parentNode.insertBefore(a,b.nextSibling)},relativeTime=function(a){a=Math.floor(Date.now()/1E3)-a;return 60>a?a+" sec ago":3600>a?Math.round(a/60)+" mins ago":86400>a?Math.round(a/3600)+" hrs ago":2592E3>a?Math.round(a/86400)+" days ago":31536E3>a?Math.round(a/
2592E3)+" months ago":Math.round(a/31536E3)+" yrs ago"},runObserver=function(a,b,c,d){d=void 0===d?null:d;var g=c||!1;c=g?_altConfig:_globalConfig;(new MutationObserver(function(a){if(g)d?b(d):b();else{for(var c=a.length,k=!1,n,u=0;u<c;u++)if(n=a[u],"childList"===n.type&&n.addedNodes.length){k=!0;break}k&&(d?b(d):b())}})).observe(a,c)},getCookie=function(a){a+="=";for(var b=document.cookie.split(";"),c=b.length,d=0;d<c;d++){for(var g=b[d];" "==g.charAt(0);)g=g.substring(1);if(0==g.indexOf(a))return g.substring(a.length,
g.length)}return""},_userID=getCookie("i"),_userName=getCookie("p"),fetchFile=function(a,b,c){var d=new XMLHttpRequest;d.open("GET",chrome.extension.getURL(b),!0);d.onload=function(){if(200===d.status&&(_debugMode&&console.log("function fetchFile: File fetched"),a.innerHTML=d.responseText,c))return c()};d.send()},disassembleSettings=function(){var a=document.querySelector("#sce-settings");a.classList.add("invisible");a.style.overflow="hidden";_app.classList.remove("g-filter-grayscale");setTimeout(function(){a.classList.remove("showBackground");
setTimeout(function(){a.remove();_body.classList.remove("g-overflow-hidden")},100)},300)},multiFollow=function(){for(var a=document.querySelectorAll(".userBadgeListItem").length,b=0;b<a;b++)if(null===followingUsers[b].querySelector(".userBadgeListItem__checkbox")){var c=document.createElement("label"),d=document.createElement("input"),g=document.createElement("div");c.className="userBadgeListItem__checkbox";d.type="checkbox";d.className="sc-checkbox-input sc-visuallyhidden";g.className="sc-checkbox-check";
c.appendChild(d);c.appendChild(g);followingUsers[b].appendChild(c)}},stripLinkDomain=function(a){return a.replace("https://soundcloud.com/","")},massSelector=function(a){var b=function(){for(var c=document.querySelectorAll(".badgeList__item"),b=c.length,e=0;e<b;e++)c[e].querySelector("label.userBadgeListItem__checkbox input.sc-checkbox-input").checked=a};if(1==a)var c=setInterval(function(){document.querySelector(".collectionSection .badgeList.lazyLoadingList .loading")?(window.scrollTo(0,document.body.scrollHeight||
document.documentElement.scrollHeight),_debugMode&&console.log("Page scroll")):(clearInterval(c),window.scrollTo(0,0),b())},50);else b()},isPlaylistURL=function(a){a=a.split("/");for(var b=a.length,c=!1,d=0;d<b;d++)"sets"===a[d]&&(c=!0);return c},moreActionParentClassName=function(a){return"."+a.closest(".lazyLoadingList").querySelector("div > ul > li, ul > li").className.split(/\s+/)[0]},moreActionMenuContent=function(a){getLocalStorage(function(b){var c=document.querySelector(".moreActions div"),
d=a.querySelector(".playlistTrackCount")||a.querySelector(".compactTrackList__moreLink"),g=a.querySelector(".soundTitle__tagContent"),e=a.querySelector(".soundTitle__username, .chartTrack__username a, .playableTile__usernameHeading, .trackItem__username"),h=a.querySelector(".soundTitle__title, .chartTrack__title a, .playableTile__artworkLink, .trackItem__trackTitle"),k=document.querySelector("#sce-moreActions-group"),n=document.createElement("div");n.className="moreActions__group";n.id="sce-moreActions-group";
var u=function(){window.location.href=h.href+"/recommended"},t=function(a,c){c=void 0===c?null:c;if(!document.querySelector("#sce-"+a+"-button")){var b=document.createElement("button");b.type="button";b.id="sce-"+a+"-button";b.className="moreActions__button sc-button-medium sce-button-icon sce-button-"+a+"";"related"==a?(b.title="Go to related tracks",b.innerText="Related tracks"):"track"==a?isPlaylistURL(c.href)?(b.title="Click to blacklist this playlist",b.innerText="Blacklist playlist"):(b.title=
"Click to blacklist this track",b.innerText="Blacklist track"):(b.title="Click to blacklist this track's "+a+"",b.innerText="Blacklist "+a+"");"related"!=a&&b.setAttribute("data-item","artist"==a||"track"==a?c.href:c.innerText);"artist"==a?stripLinkDomain(e.href)!=_userName&&n.appendChild(b):n.appendChild(b)}},q=!1,p=!1,w=!1,m=!1;b.moreActionMenu&&("on"==b.moreActionMenu.relatedActionMenu&&(q=!0),"on"==b.moreActionMenu.tagActionMenu&&(p=!0),"on"==b.moreActionMenu.artistActionMenu&&(w=!0),"on"==b.moreActionMenu.trackActionMenu&&
(m=!0));q||d||t("related");!p&&g&&t("hashtag",g);!w&&e&&t("artist",e);!m&&h&&t("track",h);k||n.hasChildNodes()&&c.appendChild(n);b=document.querySelector("#sce-related-button");c=document.querySelector("#sce-hashtag-button");d=document.querySelector("#sce-artist-button");g=document.querySelector("#sce-track-button");!q&&b&&(b.removeEventListener("click",u),b.addEventListener("click",u));!p&&c&&addTagToFilter(c);!w&&d&&addItemToFilter(d,"artists");!m&&g&&addItemToFilter(g,"tracks")})},addItemToFilter=
function(a,b){var c=function(){getLocalStorage(function(c){var d,e=a.getAttribute("data-item"),h=stripLinkDomain(e);c=c.filter||_defaultFilter;var k=Math.floor(Date.now()/1E3),h={slug:h,time:k};"artists"==b?(c.artists.push(h),d=document.querySelectorAll(".soundTitle__username, .chartTrack__username a, .playableTile__usernameHeading, .trackItem__username")):"tracks"==b&&(c.tracks.push(h),d=document.querySelectorAll(".soundTitle__title, .chartTrack__title a, .playableTile__artworkLink, .trackItem__trackTitle"));
setLocalStorage(function(){if(chrome.runtime.lastError)alert("Error settings:\n\n"+chrome.runtime.lastError);else{document.querySelector(".sc-button-more.sc-button.sc-button-active").click();for(var a=d.length,c=0;c<a;c++)if(d[c].href==e){var b=moreActionParentClassName(d[c]);d[c].closest(b).remove()}}},{filter:c})})};a.removeEventListener("click",c);a.addEventListener("click",c)},addTagToFilter=function(a){var b=function(){getLocalStorage(function(c){var b=a.getAttribute("data-item");c=c.tagsArray||
[];c.push(b);setLocalStorage(function(){var a=document.querySelectorAll(".soundTitle__tagContent"),c=a.length;if(chrome.runtime.lastError)alert("Error settings:\n\n"+chrome.runtime.lastError);else{document.querySelector(".sc-button-more.sc-button.sc-button-active").click();for(var d=0;d<c;d++)if(a[d].innerText.toUpperCase()==b.toUpperCase()){var k=moreActionParentClassName(a[d]);a[d].closest(k).remove()}}},{tagsArray:c})},["tagsArray"])};a.removeEventListener("click",b);a.addEventListener("click",
b)},eliminateDuplicates=function(a){var b,c=[],d=a.length,g={};for(b=0;b<d;b++)g[a[b]]=0;for(b in g)c.push(b);return c},exportimportInit=function(a){a=document.querySelector('#sce-import input[type="file"]');document.querySelector("#sce-export a").addEventListener("click",function(){getLocalStorage(function(a){var b=new Blob([JSON.stringify(a,null,"\t")],{type:"application/json"});a=document.createElement("a");b=window.URL.createObjectURL(b);document.body.appendChild(a);a.style="display: none";a.href=
b;a.download="SCEnhancer.json";a.click();window.URL.revokeObjectURL(b)})});var b=function(a){a=JSON.parse(a.target.result);for(var b=Object.keys(a),c=b.length,e={},h=0;h<c;h++)switch(b[h]){case "discoverModules":Object.keys(prasedImport.discoverModules);var k={},n;for(n in a.discoverModules)isNaN(n)||(k[n]="1"==a.discoverModules[n]?"1":"0");e.discoverModules=k;break;case "displayType":e.displayType="list"==a.displayType||"grid"==a.displayType?a.displayType:"default";break;case "filter":for(var k=
[a.filter.artists,a.filter.tracks],u=k.length,t={},q=0;q<u;q++){var p=[],w;for(w in k[q]){var m=k[q][w],v=m.slug,l=m.time;if(v){l||(m.time=Math.floor(Date.now()/1E3));for(var l=p.length,r=0,x=0;x<l;x++)p[x].slug==v&&(r=1);0==r&&p.push(m)}}0==q?t.artists=p:t.tracks=p}e.filter=t;break;case "tagsArray":k=a.tagsArray.length;u=[];for(t=0;t<k;t++)u.push(a.tagsArray[t].toLowerCase());e.tagsArray=eliminateDuplicates(u);break;case "moreActionMenu":var k={},y;for(y in a.moreActionMenu)k[y]="on"==a.moreActionMenu[y]?
a.moreActionMenu[y]:"off";e.moreActionMenu=k;break;default:k=a[b[h]],"on"!=k&&(k="off"),e[b[h]]=k}setLocalStorage(function(){chrome.runtime.lastError?alert("Error settings:\n\n"+chrome.runtime.lastError):location.reload()},e)};a.addEventListener("change",function(a){a=a.target.files;var c=new FileReader;c.onload=b;c.readAsText(a[0])},!1)},settingsInit=function(){_debugMode&&console.log("callback settingsInit: Initializing");for(var a=document.querySelector("#darkMode"),b=document.querySelector("#fullwidthMode"),
c=document.querySelector("#removeSettingsBtn"),d=document.querySelector("#hideSidebar"),g=document.querySelector("#hideTheUpload"),e=document.querySelector("#hideBranding"),h=document.querySelectorAll('input[name="displayType"]'),k=document.querySelector("#removePreviews"),n=document.querySelector("#removePlaylists"),u=document.querySelector("#removeLongTracks"),t=document.querySelector("#removeUserActivity"),q=document.querySelector("#removeReposts"),p=document.querySelector("#hiddenOutline"),w=
document.querySelector("#profileImages"),m=document.querySelector("#relatedActionMenu"),v=document.querySelector("#tagActionMenu"),l=document.querySelector("#artistActionMenu"),r=document.querySelector("#trackActionMenu"),x=document.querySelector("#disableUnfollower"),y=document.querySelector("#disableDiscoverToggle"),f=document.querySelector("#sce-settings-reset"),C=document.querySelectorAll(".sce-close-settings"),z=C.length,A=[a,b,c],B=0;B<z;B++)C[B].addEventListener("click",function(){return disassembleSettings()});
document.addEventListener("mousedown",function(a){var b=null==a?event:a;1!=b.which&&0!=b.button&&1!=b.button||"sce-settings"!=a.target.id||disassembleSettings()});f.addEventListener("click",function(){"true"==f.getAttribute("warning")?resetLocalStorage(function(){return location.reload()}):(f.setAttribute("warning",!0),f.innerText="Are you sure you want to reset?",setTimeout(function(){f.setAttribute("warning",!1);f.innerText="Reset all SCEnhancer settings"},5E3))});getLocalStorage(function(f){"on"==
f.darkMode&&(a.checked=!0);"on"==f.fullwidthMode&&(b.checked=!0);"on"==f.removeSettingsBtn&&(c.checked=!0);"on"==f.hideSidebar&&(d.checked=!0);"on"==f.hideTheUpload&&(g.checked=!0);"on"==f.hideBranding&&(e.checked=!0);"list"==f.displayType?h[1].checked=!0:"grid"==f.displayType?h[2].checked=!0:h[0].checked=!0;"on"==f.removePreviews&&(k.checked=!0);"on"==f.removePlaylists&&(n.checked=!0);"on"==f.removeLongTracks&&(u.checked=!0);"on"==f.removeUserActivity&&(t.checked=!0);"on"==f.removeReposts&&(q.checked=
!0);"on"==f.hiddenOutline&&(p.checked=!0);"on"==f.profileImages&&(w.checked=!0);"on"==f.disableUnfollower&&(x.checked=!0);"on"==f.disableDiscoverToggle&&(y.checked=!0);f.moreActionMenu&&("on"==f.moreActionMenu.relatedActionMenu&&(m.checked=!0),"on"==f.moreActionMenu.tagActionMenu&&(v.checked=!0),"on"==f.moreActionMenu.artistActionMenu&&(l.checked=!0),"on"==f.moreActionMenu.trackActionMenu&&(r.checked=!0))});console.log(A);A.forEach(function(b){b.addEventListener("click",function(){match(b).on(function(b){return a},
function(){setLocalStorage(function(){console.log("darkmode lel")},{darkMode:"on"})})})});document.querySelector("#sce-settings-save").addEventListener("click",function(){for(var a=document.forms["sce-settings-form"].querySelectorAll("input"),b=a.length,c=[],l=0;l<b;l++){var f=a[l].name,r=a[l].type,d=a[l].checked,m=a[l].value,r="checkbox"==r?d?"on":"off":"radio"==r?d?m:"skip":m;"skip"!=r&&(c[f]=r)}saveSettings(c)})},filterInit=function(){_debugMode&&console.log("callback filterInit: Initializing");
var a=document.querySelector("#artist-blacklist"),b=document.querySelector("#track-blacklist"),c=document.querySelector("#playlist-blacklist"),d=document.querySelector("#skipTags");getLocalStorage(function(a){null!=a.tagsArray&&(d.value=a.tagsArray);insignia(d,{delimiter:",",deletion:!0});a=document.querySelector(".nsg-tags");runObserver(a,function(){for(var a=document.querySelectorAll(".nsg-tag"),b=a.length,c=[],d=0;d<b;d++)c.push(a[d].innerText);setLocalStorage(function(){chrome.runtime.lastError&&
alert("Error while saving settings:\n\n"+chrome.runtime.lastError);_debugMode&&console.log("Tag array saved: "+c)},{tagsArray:c})},!0)});var g=function(a){a=a.split("/");var b=a[0];"sets"==a[1]?b=a[2]:a[1]&&(b=a[1]);b=b.replace(/-/g," ");return b=b.replace(/_/g," ")},e=function(a,b){getLocalStorage(function(c){var d=[],k=0,h=function(a){for(var b=[],c=0;c<k;c++)!0===a&&isPlaylistURL(d[c].slug)&&b.push(d[c]),!1===a&&(isPlaylistURL(d[c].slug)||b.push(d[c]));d=b},e=function(a,b,c){for(var l=a.length;l--;)a[l]&&
a[l].hasOwnProperty(b)&&a[l][b]===c&&a.splice(l,1);return a};c.filter&&(d=c.filter.tracks,k=d.length,"artists"==b&&c.filter.artists?(d=c.filter.artists,k=d.length):"tracks"==b&&c.filter.tracks?h(!1):h(!0));if(0===k)c=document.createElement("span"),c.innerHTML="No "+b+" has been filtered!",a.appendChild(c);else for(c={i:0};c.i<k;c={i:c.i},c.i++){var h=document.createElement("li"),n=document.createElement("span"),m=document.createElement("a"),v=document.createElement("div"),l=document.createElement("span"),
r=document.createElement("span"),x=c.i+1;n.className="sce-filter-item-order";n.innerText="#"+x;v.className="sce-filter-actions";m.className="sce-filter-item-name";m.href="https://soundcloud.com/"+d[c.i].slug;m.innerText=g(d[c.i].slug);m.target="_blank";l.innerText=relativeTime(d[c.i].time);l.className="sce-filter-option";r.className="sce-filter-option-remove";h.appendChild(n);h.appendChild(m);v.appendChild(l);v.appendChild(r);h.appendChild(v);a.appendChild(h);r.addEventListener("click",function(a){return function(){getLocalStorage(function(c){c=
c.filter;"artists"==b?e(c.artists,"slug",d[a.i].slug):e(c.tracks,"slug",d[a.i].slug);setLocalStorage(function(){listItemDelete.closest("li").remove();for(var c=document.querySelectorAll(".filter-container"),l=c.length,d=0;d<l;d++)if(!c[a.i].hasChildNodes()){var r=document.createElement("span");r.innerHTML="No "+b+" has been filtered!";c[d].appendChild(r)}},{filter:c})},["filter"])}}(c))}})};e(a,"artists");e(b,"tracks");e(c,"playlists")},getLocalStorage=function(a,b){chrome.storage.sync.get((void 0===
b?null:b)||_getGlobalSettings,a)},setLocalStorage=function(a,b){chrome.storage.sync.set((void 0===b?null:b)||_setGlobalSettings,a)},resetLocalStorage=function(a){chrome.storage.sync.remove(_getGlobalSettings,a)},readyStateCheck=function(){setAttributes();settingsSetup();injectedJavascript()};document.addEventListener("readystatechange",readyStateCheck);
setInterval(function(){location.href!=oldLocation&&(_debugMode&&console.log("-=- NEW PAGE LOADED -=-"),oldLocation=location.href,readyStateCheck())},100);
var setAttributes=function(){_debugMode&&console.log("function setAttributes: Initializing");getLocalStorage(function(a){"on"==a.darkMode&&_body.setAttribute("data-theme","dark");"on"==a.fullwidthMode&&_body.setAttribute("fullwidth","");"on"!=a.removeSettingsBtn&&_body.setAttribute("settings-button","");"on"==a.hideSidebar?_body.setAttribute("data-sidebar","hidden"):_body.setAttribute("data-sidebar","show");"https://soundcloud.com/stream"==location.href&&("list"==a.displayType?_body.setAttribute("data-display",
"list"):"grid"==a.displayType?_body.setAttribute("data-display","grid"):_body.setAttribute("data-display","default"));"on"==a.hiddenOutline&&_body.setAttribute("hidden-outline","");"on"==a.profileImages&&_body.setAttribute("square","")})};setAttributes();
var settingsSetup=function(){_debugMode&&console.log("function settingsSetup: Initializing");var a=document.querySelector("#stream-controller"),b=document.querySelector("#version-display"),c=document.querySelector("#enhancer-btn"),d=document.querySelector(".playControls"),g=document.querySelector(".playControls__inner"),e=document.querySelector(".announcements.g-z-index-fixed-top"),h=document.querySelector(".header__userNavUsernameButton"),k=document.querySelector(".header__logo.left");d.className=
"playControls g-z-index-header m-visible";e.className="announcements g-z-index-fixed-top m-offset";getLocalStorage(function(d){if("on"!=d.hideBranding&&(k.id="sce-logo",!b)){_debugMode&&console.log("-> Branding rendered");var e=document.createElement("span");e.id="version-display";e.innerText=_manifestData.version;k.appendChild(e)}if("on"!=d.removeSettingsBtn&&!c){_debugMode&&console.log("-> SCEbutton hidden");var e=document.createElement("div"),n=document.createElement("button");e.id="enhancer-container";
n.className="sc-enhancer sc-button sc-button-medium sc-button-responsive";n.id="enhancer-btn";n.tabindex="0";n.innerText="SCEnhancer";e.appendChild(n);g.appendChild(e);settingsMenu()}var q=setInterval(function(){var a=document.querySelector("ul.profileTabs.g-tabs");if(a&&!document.querySelector("#profile-tab-like")){_debugMode&&console.log("-> Like shortcut rendered");clearInterval(q);var b=a.querySelector(".g-tabs-link:first-child").getAttribute("href"),c=document.createElement("li"),d=document.createElement("a");
c.className="g-tabs-item";c.id="profile-tab-like";d.className="g-tabs-link";d.href=b+"/likes";d.innerText="Likes";c.appendChild(d);a.appendChild(c)}},100),p=function(){if(!document.querySelector(".profileMenu__list.profileMenu__enhancer.sc-list-nostyle")){h.removeEventListener("click",p);var a=document.querySelector(".profileMenu"),b=document.createElement("ul"),c=document.createElement("li"),d=document.createElement("a");b.className="profileMenu__list profileMenu__enhancer sc-enhancer sc-list-nostyle";
c.className="profileMenu__item";d.className="profileMenu__link profileMenu__enhancerMenu";d.innerText="SCEnhancer";c.appendChild(d);b.appendChild(c);a.appendChild(b);settingsMenu();var m=setInterval(function(){document.querySelector(".profileMenu__list.profileMenu__enhancer.sc-list-nostyle")||(settingsMenu(),clearInterval(m),h.addEventListener("click",p))},100)}};h.removeEventListener("click",p);h.addEventListener("click",p);if("on"!=d.disableDiscoverToggle&&"https://soundcloud.com/discover"==location.href)var w=
setInterval(function(){var a=document.querySelector("div.modularHome.lazyLoadingList ul.lazyLoadingList__list");if(a){clearInterval(w);var b=function(){getLocalStorage(function(b){_debugMode&&console.log("function discoverModuleHider: Running");for(var c=a.querySelectorAll(".selectionModule"),d=c.length,l={i:0};l.i<d;l={_moduleSwitch:l._moduleSwitch,i:l.i},l.i++){var m=b.discoverModules||{},r=1==m[l.i]?"hidden":"shown",x=c[l.i].querySelector("h2.selectionModule__titleText"),e=x.querySelector("a.hide-discover-section");
c[l.i].setAttribute("state",r);e||(r=1==m[l.i]?0:1,m=1==m[l.i]?"Show this section":"Hide this section",e=document.createElement("a"),e.className="hide-discover-section",e.innerText=m,e.setAttribute("section-id",l.i),e.setAttribute("section-state",r),x.appendChild(e),l._moduleSwitch=document.querySelector('.hide-discover-section[section-id="'+l.i+'"]'),l._moduleSwitch.addEventListener("click",function(a){return function(){getLocalStorage(function(b){var c=a._moduleSwitch.getAttribute("section-id"),
d=a._moduleSwitch.getAttribute("section-state"),l=b.discoverModules||{};l[c]=d;setLocalStorage(function(){if(chrome.runtime.lastError)alert("Error while saving settings:\n\n"+chrome.runtime.lastError);else{var b=1==l[c]?"Show this section":"Hide this section",d=1==l[a.i]?"hidden":"shown",m=1==l[c]?0:1,r=a._moduleSwitch.closest(".selectionModule");a._moduleSwitch.innerText=b;a._moduleSwitch.setAttribute("section-state",m);r.setAttribute("state",d)}},{discoverModules:l})})}}(l)))}})};b();runObserver(a,
b)}},100);if("https://soundcloud.com/stream"==location.href)var m=setInterval(function(){var b=document.querySelector(".stream__header");if(b&&(clearInterval(m),!a)){var c=document.createElement("div"),e=document.createElement("div"),h=document.createElement("h3"),f=document.createElement("ul"),g=document.createElement("li"),k=document.createElement("li"),v=document.createElement("li");c.className="stream__controls";c.id="stream-controller";e.className="listDisplayToggle g-flex-row-centered";h.className=
"listDisplayToggleTitle sc-text-light sc-type-medium";h.innerText="View";f.className="listDisplayToggle sc-list-nostyle g-flex-row-centered";g.className="listDisplayToggle setting-display-tile default-icon";g.title="Default";g.setAttribute("data-id","default");k.className="listDisplayToggle setting-display-tile list-icon";k.title="Compact";k.setAttribute("data-id","list");v.className="listDisplayToggle setting-display-tile grid-icon";v.title="Grid";v.setAttribute("data-id","grid");e.appendChild(h);
f.appendChild(g);f.appendChild(k);f.appendChild(v);e.appendChild(f);c.appendChild(e);b.appendChild(c);var n=document.querySelector(".listDisplayToggle.setting-display-tile.default-icon"),p=document.querySelector(".listDisplayToggle.setting-display-tile.list-icon"),t=document.querySelector(".listDisplayToggle.setting-display-tile.grid-icon");"list"==d.displayType?p.classList.add("active"):"grid"==d.displayType?t.classList.add("active"):n.classList.add("active");for(var q=document.querySelectorAll(".listDisplayToggle.setting-display-tile"),
u=q.length,b={i:0};b.i<u;b={i:b.i},b.i++)q[b.i].addEventListener("click",function(a){return function(){for(var b=q[a.i].getAttribute("data-id"),c=0;c<u;c++)q[c].classList.remove("active");"list"===b?(_body.setAttribute("data-display","list"),p.classList.add("active")):"grid"===b?(_body.setAttribute("data-display","grid"),t.classList.add("active")):(_body.setAttribute("data-display","default"),n.classList.add("active"));setLocalStorage(function(){chrome.runtime.lastError&&alert("Error while saving settings:\n\n"+
chrome.runtime.lastError);_debugMode&&console.log("Display mode saved: "+b)},{displayType:b})}}(b))}},100);if("https://soundcloud.com/you/following"==location.href&&"on"!=d.disableUnfollower)var v=setInterval(function(){if(document.querySelector(".collectionSection__list .lazyLoadingList.badgeList ul.lazyLoadingList__list")){clearInterval(v);var a=document.querySelector(".collectionSection__top");if(null==document.querySelector("#mass-unfollow")){var b=document.createElement("div"),c=document.createElement("div"),
d=document.createElement("h3"),m=document.createElement("button"),e=document.createElement("button"),g=document.createElement("button");b.className="stream__controls";b.id="mass-unfollow";c.className="g-flex-row-centered";d.className="sc-text-light sc-type-medium margin-spacing";d.innerText="Options:";m.className="sc-button margin-spacing";m.id="confirm-unfollow-button";m.innerText="Mass unfollow";e.className="sc-button margin-spacing";e.id="undo-unfollow-button";e.innerText="Reset selection";g.className=
"sc-button";g.id="all-unfollow-button";g.innerText="Select all";c.appendChild(d);c.appendChild(m);c.appendChild(e);c.appendChild(g);b.appendChild(c);insertAfter(b,a);a.style.margin="0px"}multiFollow();runObserver(hasUnfollowerContainer,multiFollow);var h=document.querySelector("#confirm-unfollow-button"),a=document.querySelector("#undo-unfollow-button"),b=document.querySelector("#all-unfollow-button");h.addEventListener("click",function(){for(var a=document.querySelectorAll(".badgeList__item"),b=
a.length,c=0,d=0;d<b;d++)1==a[d].querySelector("label.userBadgeListItem__checkbox input.sc-checkbox-input").checked&&(a[d].querySelector(".userBadgeListItem .userBadgeListItem__action button.sc-button-follow").click(),c++);h.innerText=1==c?"1 account got unfollowed!":c+" accounts got unfollowed!";setTimeout(function(){h.innerText="Mass unfollow"},3E3)});a.addEventListener("click",function(){massSelector(!1)});b.addEventListener("click",function(){massSelector(!0)})}},100)})},renderSettings=function(){_debugMode&&
console.log("function renderSettings: Initializing");_body.className="g-overflow-hidden";_body.style.paddingRight="0px";_app.className="g-filter-grayscale";var a=document.createElement("div"),b=document.createElement("button"),c=document.createElement("div"),d=document.createElement("div"),g=document.createElement("h1"),e=document.createElement("span"),h=document.createElement("ul"),k=document.createElement("li"),n=document.createElement("li"),u=document.createElement("li"),t=document.createElement("li"),
q=document.createElement("ul"),p=document.createElement("li"),w=document.createElement("label"),m=document.createElement("input"),v=document.createElement("li"),l=document.createElement("a"),r=document.createElement("a"),x=document.createElement("a"),y=document.createElement("a"),f=document.createElement("a"),C=document.createElement("a"),z=document.createElement("div"),A=document.createElement("div"),B=document.createElement("div"),E=document.createElement("div"),F=document.createElement("div"),
J=document.createElement("hr"),H=document.createElement("span"),G=document.createElement("a");a.id="sce-settings";a.className="modal g-z-index-modal-background g-opacity-transition g-z-index-overlay modalWhiteout showBackground invisible";a.style.paddingRight="0px";a.style.outline="none";a.style.overflow="hidden";a.tabindex="-1";b.className="modal__closeButton sce-close-settings";b.title="Close";b.type="button";b.innerText="Close";c.className="modal__modal sc-border-box g-z-index-modal-content";d.className=
"modal__content";g.id="sce-settings-title";g.className="g-modal-title-h1 sc-truncate";g.innerText="SoundCloud Enhancer "+_manifestData.version;e.className="credits";e.innerHTML="Made with <span class='heart'>&hearts;</span> in Denmark by <a href='https://twitter.com/DapperBenji' target='_blank'>@DapperBenji</a>.";h.id="tab-container";h.className="g-tabs g-tabs-small";k.className="g-tabs-item";n.className="g-tabs-item";u.className="g-tabs-item";t.className="g-tabs-item";q.className="g-side-items";
p.className="g-tabs-item";p.id="sce-import";m.className="hidden";m.type="file";m.accept=".json";v.className="g-tabs-item";v.id="sce-export";l.setAttribute("action","settings");l.className="tab g-tabs-link active";l.innerText="Settings";r.setAttribute("action","filter");r.className="tab g-tabs-link";r.innerText="Filter (beta)";x.setAttribute("action","changelog");x.className="tab g-tabs-link";x.innerText="Changelog";y.setAttribute("action","about");y.className="tab g-tabs-link";y.innerText="About";
f.className="g-tabs-link";f.innerText="Import";C.className="g-tabs-link";C.innerText="Export";z.id="sce-settings-content";A.className="tabPage";A.id="settings";A.style.display="block";B.className="tabPage";B.id="filter";E.className="tabPage";E.id="changelog";F.className="tabPage";F.id="about";H.className="donation";G.href="https://www.paypal.me/BenjaminBachJensen";G.innerText="Support the development - Buy me a cup of coffee ;)";G.target="_blank";z.appendChild(A);z.appendChild(B);z.appendChild(E);
z.appendChild(F);k.appendChild(l);n.appendChild(r);u.appendChild(x);t.appendChild(y);w.appendChild(f);w.appendChild(m);p.appendChild(w);v.appendChild(C);q.appendChild(p);q.appendChild(v);h.appendChild(k);h.appendChild(n);h.appendChild(u);h.appendChild(t);h.appendChild(q);H.appendChild(G);d.appendChild(g);d.appendChild(e);d.appendChild(h);d.appendChild(z);d.appendChild(J);d.appendChild(H);c.appendChild(d);a.appendChild(b);a.appendChild(c);_body.appendChild(a);setTimeout(function(){a.classList.remove("invisible")},
10);setTimeout(function(){a.style.overflow=null},400);fetchFile(A,"/assets/html/settings.html",settingsInit);fetchFile(B,"/assets/html/filter.html",filterInit);fetchFile(E,"/assets/html/changelog.html");fetchFile(F,"/assets/html/about.html");for(var D=document.querySelectorAll(".tab"),I=D.length,b={i:0};b.i<I;b={i:b.i},b.i++)D[b.i].addEventListener("click",function(a){return function(){for(var b=0;b<I;b++)D[b].className="tab g-tabs-link";D[a.i].className="tab g-tabs-link active";for(var b=document.querySelectorAll(".tabPage"),
c=b.length,d=0;d<c;d++)b[d].style.display="none";b=D[a.i].getAttribute("action");document.getElementById(b).style.display="block"}}(b));getLocalStorage(exportimportInit)},saveSettings=function(a){var b={};"on"!=a.darkMode&&(a.darkMode="off");"on"!=a.fullwidthMode&&(a.fullwidthMode="off");"on"!=a.removeSettingsBtn&&(a.removeSettingsBtn="off");"on"!=a.hideSidebar&&(a.hideSidebar="off");"on"!=a.hideBranding&&(a.hideBranding="off");"default"==a.displayType&&(a.displayType="");"on"!=a.removePreviews&&
(a.removePreviews="off");"on"!=a.removePlaylists&&(a.removePlaylists="off");"on"!=a.removeLongTracks&&(a.removeLongTracks="off");"on"!=a.removeUserActivity&&(a.removeUserActivity="off");"on"!=a.removeReposts&&(a.removeReposts="off");"on"!=a.hiddenOutline&&(a.hiddenOutline="off");"on"!=a.profileImages&&(a.profileImages="off");"on"!=a.disableUnfollower&&(a.disableUnfollower="off");"on"!=a.disableDiscoverToggle&&(a.disableDiscoverToggle="off");b.relatedActionMenu="on"!=a.relatedActionMenu?"off":"on";
b.tagActionMenu="on"!=a.tagActionMenu?"off":"on";b.artistActionMenu="on"!=a.artistActionMenu?"off":"on";b.trackActionMenu="on"!=a.trackActionMenu?"off":"on";_setGlobalSettings.darkMode=a.darkMode;_setGlobalSettings.fullwidthMode=a.fullwidthMode;_setGlobalSettings.removeSettingsBtn=a.removeSettingsBtn;_setGlobalSettings.hideSidebar=a.hideSidebar;_setGlobalSettings.hideBranding=a.hideBranding;_setGlobalSettings.displayType=a.displayType;_setGlobalSettings.removePreviews=a.removePreviews;_setGlobalSettings.removePlaylists=
a.removePlaylists;_setGlobalSettings.removeLongTracks=a.removeLongTracks;_setGlobalSettings.removeUserActivity=a.removeUserActivity;_setGlobalSettings.removeReposts=a.removeReposts;_setGlobalSettings.hiddenOutline=a.hiddenOutline;_setGlobalSettings.profileImages=a.profileImages;_setGlobalSettings.disableUnfollower=a.disableUnfollower;_setGlobalSettings.disableDiscoverToggle=a.disableDiscoverToggle;_setGlobalSettings.moreActionMenu=b;setLocalStorage(function(){chrome.runtime.lastError?alert("Error while saving settings:\n\n"+
chrome.runtime.lastError):location.reload()})},settingsMenu=function(){_debugMode&&console.log("function settingsMenu: Initializing");for(var a=document.querySelectorAll(".sc-enhancer"),b=a.length,c=0;c<b;c++)a[c].removeEventListener("click",renderSettings),a[c].addEventListener("click",renderSettings)},injectedJavascript=function(){_debugMode&&console.log("function injectedJavascript: Initializing");var a=document.querySelector(".playbackSoundBadge"),b=document.querySelector(".header__userNavUsernameButton").getAttribute("href"),
c=document.querySelector(".skipControl__next"),d=document.querySelector(".skipControl__previous"),g=function(){getLocalStorage(function(a){for(var b=["tag","artist","track"],c=b.length,d={filter:0};d.filter<c;d={filter:d.filter},d.filter++){var m=null,e=null,f=function(a,b,c){stripLinkDomain(b.href)==c.slug&&a()};switch(b[d.filter]){case "tag":m=document.querySelectorAll(".soundTitle__tagContent");a.tagsArray&&(e=a.tagsArray);f=function(a,b,c){b.innerText.toUpperCase()==c.toUpperCase()&&a(c)};break;
case "artist":m=document.querySelectorAll(".soundTitle__username");a.filter&&a.filter.artists&&(e=a.filter.artists);break;case "track":m=document.querySelectorAll(".soundTitle__title"),a.filter&&a.filter.tracks&&(e=a.filter.tracks)}if(m&&e)for(var g=m.length,h=e.length,k=0;k<g;k++)for(var n={},p=0;p<h;n={_parentElement:n._parentElement},p++){var q=moreActionParentClassName(m[k]);n._parentElement=m[k].closest(q);f(function(a,c){return function(d){d=void 0===d?null:d;a._parentElement.setAttribute("data-skip",
"true");d?a._parentElement.setAttribute("banned-"+b[c.filter]+"",d):a._parentElement.setAttribute("banned-"+b[c.filter]+"","");a._parentElement.className+=" hidden"}}(n,d),m[k],e[p])}}},["filter","tagsArray"])},e=function(){_debugMode&&console.log("function markPlaylists: Running");for(var a=document.querySelectorAll(".soundList__item .activity div.sound.streamContext"),b=a.length,c=0;c<b;c++)if(1==a[c].className.includes("playlist")){var d;d=a[c].querySelectorAll(".compactTrackList__listContainer .compactTrackList__item");
if(5>d.length)d=d.length;else{var e=a[c].querySelector(".compactTrackList__moreLink");d=e?e.innerText.replace(/\D/g,""):d.length}e=a[c].closest(".soundList__item");e.setAttribute("data-playlist","true");e.setAttribute("data-count",d)}},h=function(){_debugMode&&console.log("function hidePreviews: Running");for(var a=document.querySelectorAll(".sc-snippet-badge.sc-snippet-badge-medium.sc-snippet-badge-grey"),b=a.length,c=0;c<b;c++)if(a[c].innerHTML){var d=a[c].closest(".soundList__item");d.setAttribute("data-skip",
"true");d.setAttribute("data-type","preview");d.className="soundList__item hidden"}},k=function(){_debugMode&&console.log("function hidePlaylists: Running");for(var a=document.querySelectorAll(".soundList__item"),b=a.length,c=0;c<b;c++)"true"==a[c].getAttribute("data-playlist")&&(a[c].setAttribute("data-skip","true"),a[c].className="soundList__item hidden")},n=function(){_debugMode&&console.log("function hideReposts: Running");for(var a=document.querySelectorAll(".soundContext__repost"),b=a.length,
c=0;c<b;c++){var d=a[c].closest(".soundList__item");d.setAttribute("data-skip","true");d.setAttribute("data-type","repost");d.className="soundList__item hidden"}},u=function(){_debugMode&&console.log("function checkCanvas: Running");for(var a=document.querySelectorAll(".sound__waveform .waveform .waveform__layer.waveform__scene"),b=a.length,c=0;c<b;c++)for(var d=a[c].querySelectorAll("canvas.g-box-full.sceneLayer"),e=d.length,g=0;g<e;g++){var f=d[d.length-1],f=f.getContext("2d").getImageData(f.width-
27,27,1,1).data;0===f[0]&&0===f[1]&&0===f[2]&&255===f[3]&&(f=a[c].closest(".soundList__item"),f.setAttribute("data-skip","true"),f.setAttribute("data-type","long"),f.className="soundList__item hidden")}},t=function(){_debugMode&&console.log("function checkUserActivity: Running");for(var a=document.querySelectorAll(".soundContext__usernameLink"),c=a.length,d=0;d<c;d++){var e=a[d].getAttribute("href");b==e&&(e=a[d].closest(".soundList__item"),e.setAttribute("data-skip","true"),e.setAttribute("data-type",
"yours"),e.className="soundList__item hidden")}},q=function(a){if(!document.querySelector(".moreActions #sce-moreActions-group")){var b=moreActionParentClassName(a.target);a=a.target.closest(b);moreActionMenuContent(a)}},p=function(){for(var a=document.querySelectorAll("button.sc-button-more.sc-button-small"),b=a.length,c=0;c<b;c++)a[c].removeEventListener("click",q),a[c].addEventListener("click",q)},w=setInterval(function(){if(document.querySelector(".l-fluid-fixed > .l-main .lazyLoadingList ul, .l-fixed-fluid > .l-main .lazyLoadingList > ul, .l-hero-fluid-fixed .l-main .lazyLoadingList, .l-collection .l-main .lazyLoadingList")){var b=
document.querySelectorAll(".lazyLoadingList > ul, .lazyLoadingList > div > ul"),q=b.length;_debugMode&&console.log(b);clearInterval(w);getLocalStorage(function(a){p();e();g();"on"==a.removePreviews&&h();"on"==a.removePlaylists&&k();"on"==a.removeReposts&&n();"on"==a.removeLongTracks&&u();"on"==a.removeUserActivity&&t();for(var c=0;c<q;c++)runObserver(b[c],p),runObserver(b[c],e),runObserver(b[c],g),"on"==a.removePreviews&&runObserver(b[c],h),"on"==a.removePlaylists&&runObserver(b[c],k),"on"==a.removeReposts&&
runObserver(b[c],n),"on"==a.removeLongTracks&&runObserver(b[c],u),"on"==a.removeUserActivity&&runObserver(b[c],t)});runObserver(a,function(){getLocalStorage(function(a){a=document.querySelectorAll(".soundList__item");for(var b=a.length,e=0;e<b;e++){var g=a[e].getAttribute("data-skip"),f=a[e].getAttribute("data-playlist");a[e].querySelector(".soundTitle__title span");if(1==a[e].querySelector(".activity div.sound.streamContext").className.includes("playing"))if(_debugMode&&console.log("Skip song?: "+
g),"true"==g)if(d.addEventListener("click",function(){skipPrevious=!0}),1==f)if(g=a[e].getAttribute("data-count"),1==skipPrevious)for(f=0;f<g;f++)d.click();else for(f=0;f<g;f++)c.click();else 1==skipPrevious?d.click():c.click();else skipPrevious=!1}})})}},100)};

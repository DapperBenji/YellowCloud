var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var b=0,d={next:function(){if(b<a.length){var e=b++;return{value:c(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6-impl","es3");
var _setGlobalSettings={},_getGlobalSettings="debug darkMode listenerMode settingsMenus fullwidthMode moreActionMenu removeSettingsBtn disableDiscoverToggle hideSidebar hideBranding displayType removePreviews removePlaylists removeLongTracks removeUserActivity removeReposts tagsArray filter hiddenOutline profileImages disableUnfollower discoverModules".split(" "),getLocalStorage=function(a,c){chrome.storage.sync.get((void 0===c?null:c)||_getGlobalSettings,a)},setLocalStorage=function(a,c){chrome.storage.sync.set((void 0===
c?null:c)||_setGlobalSettings,a)},resetLocalStorage=function(a){chrome.storage.sync.remove(_getGlobalSettings,a)},getCookie=function(a){a+="=";for(var c=document.cookie.split(";"),b=c.length,d=0;d<b;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(a))return e.substring(a.length,e.length)}return""},_manifestData=chrome.runtime.getManifest(),_globalConfig={childList:!0},_altConfig={attributes:!0,childList:!0,subtree:!0},_body=document.querySelector("body"),_app=document.querySelector("#app"),
_userID=getCookie("i"),_userName=getCookie("p"),_defaultFilter={artists:[],tracks:[]},_defaultMenus={hideFooterMenu:"off",hideHeaderMenu:"off"},_authorQuery=".soundTitle__username, .chartTrack__username a, .playableTile__usernameHeading, .trackItem__username",_trackQuery=".soundTitle__title, .chartTrack__title a, .playableTile__artworkLink, .trackItem__trackTitle",_tagQuery=".soundTitle__tagContent",skipPrevious=!1,oldLocation=location.href,debugMode=null;
getLocalStorage(function(a){"on"===a.debug&&(debugMode=!0,console.log("-=- YellowCloud developer -=-"))},["debug"]);
var matched=function(a){return{on:function(){return matched(a)},otherwise:function(){return a}}},match=function(a){return{on:function(c,b){return c(a)?matched(b(a)):match(a)},otherwise:function(c){return c(a)}}},insertAfter=function(a,c){c.parentNode.insertBefore(a,c.nextSibling)},relativeTime=function(a){a=Math.floor(Date.now()/1E3)-a;return 60>a?a+" sec ago":3600>a?Math.round(a/60)+" mins ago":86400>a?Math.round(a/3600)+" hrs ago":2592E3>a?Math.round(a/86400)+" days ago":31536E3>a?Math.round(a/
2592E3)+" months ago":Math.round(a/31536E3)+" yrs ago"},runObserver=function(a,c,b){var d=b||!1;b=d?_altConfig:_globalConfig;window.observer=new MutationObserver(function(a){if(d)c();else{for(var b=a.length,e=!1,h,g=0;g<b;g++)if(h=a[g],"childList"===h.type&&h.addedNodes.length){e=!0;break}e&&c()}});observer.observe(a,b)},fetchFile=function(a,c,b){var d=new XMLHttpRequest;d.open("GET",chrome.extension.getURL(c),!0);d.onload=function(){if(200===d.status&&(debugMode&&console.log("function fetchFile: File fetched"),
a.innerHTML=d.responseText,b))return b()};d.send()},disassembleSettings=function(){var a=document.querySelector("#yellowcloud");a.classList.add("invisible");a.style.overflow="hidden";_app.classList.remove("g-filter-grayscale");setTimeout(function(){a.classList.remove("showBackground");setTimeout(function(){a.remove();_body.classList.remove("g-overflow-hidden")},100)},300)},multiFollow=function(){for(var a=document.querySelectorAll(".userBadgeListItem"),c=a.length,b=0;b<c;b++)if(null===a[b].querySelector(".userBadgeListItem__checkbox")){var d=
document.createElement("label"),e=document.createElement("input"),k=document.createElement("div");d.className="userBadgeListItem__checkbox";e.type="checkbox";e.className="sc-checkbox-input sc-visuallyhidden";k.className="sc-checkbox-check";d.appendChild(e);d.appendChild(k);a[b].appendChild(d)}},stripLinkDomain=function(a){return a.replace("https://soundcloud.com/","")},massSelector=function(a){var c=function(){for(var b=document.querySelectorAll(".badgeList__item"),c=b.length,k=0;k<c;k++)b[k].querySelector("label.userBadgeListItem__checkbox input.sc-checkbox-input").checked=
a};if(1==a)var b=setInterval(function(){document.querySelector(".collectionSection .badgeList.lazyLoadingList .loading")?(window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight),debugMode&&console.log("Page scroll")):(clearInterval(b),window.scrollTo(0,0),c())},50);else c()},isPlaylistURL=function(a){a=a.split("/");for(var c=a.length,b=!1,d=0;d<c;d++)"sets"===a[d]&&(b=!0);return b},moreActionParentClassName=function(a){return"."+a.closest(".lazyLoadingList").querySelector("div > ul > li, ul > li").className.split(/\s+/)[0]},
moreActionMenuContent=function(a){getLocalStorage(function(c){var b=document.querySelector(".moreActions div"),d=a.querySelector(".playlistTrackCount")||a.querySelector(".compactTrackList__moreLink"),e=a.querySelector(_tagQuery),k=a.querySelector(_authorQuery),f=a.querySelector(_trackQuery),h=document.querySelector("#yellowcloud-moreActions-group"),g=document.createElement("div");g.className="moreActions__group";g.id="yellowcloud-moreActions-group";var p=function(){window.location.href=f.href+"/recommended"},
l=function(a,b){b=void 0===b?null:b;if(!document.querySelector("#yellowcloud-"+a+"-button")){var c=document.createElement("button");c.type="button";c.id="yellowcloud-"+a+"-button";c.className="moreActions__button sc-button-medium yellowcloud-button-icon yellowcloud-button-"+a+"";"related"===a?(c.title="Go to related tracks",c.innerText="Related tracks"):"track"===a?isPlaylistURL(b.href)?(c.title="Click to blacklist this playlist",c.innerText="Blacklist playlist"):(c.title="Click to blacklist this track",
c.innerText="Blacklist track"):(c.title="Click to blacklist this track's "+a+"",c.innerText="Blacklist "+a+"");"related"!==a&&c.setAttribute("data-item","artist"===a||"track"===a?b.href:b.innerText);"artist"===a?stripLinkDomain(k.href)!==_userName&&g.appendChild(c):g.appendChild(c)}},r=!1,t=!1,x=!1,q=!1;c.moreActionMenu&&("on"===c.moreActionMenu.relatedActionMenu&&(r=!0),"on"===c.moreActionMenu.tagActionMenu&&(t=!0),"on"===c.moreActionMenu.artistActionMenu&&(x=!0),"on"===c.moreActionMenu.trackActionMenu&&
(q=!0));r||d||l("related");!t&&e&&l("hashtag",e);!x&&k&&l("artist",k);!q&&f&&l("track",f);h||g.hasChildNodes()&&b.appendChild(g);c=document.querySelector("#yellowcloud-related-button");b=document.querySelector("#yellowcloud-hashtag-button");d=document.querySelector("#yellowcloud-artist-button");e=document.querySelector("#yellowcloud-track-button");!r&&c&&(c.removeEventListener("click",p),c.addEventListener("click",p));!t&&b&&addTagToFilter(b);!x&&d&&addItemToFilter(d,"artists");!q&&e&&addItemToFilter(e,
"tracks")})},addItemToFilter=function(a,c){var b=function(){getLocalStorage(function(b){var d,k=a.getAttribute("data-item"),f=stripLinkDomain(k);b=b.filter||_defaultFilter;var h=Math.floor(Date.now()/1E3),f={slug:f,time:h};"artists"===c?(b.artists.push(f),d=document.querySelectorAll(".soundTitle__username, .chartTrack__username a, .playableTile__usernameHeading, .trackItem__username")):"tracks"===c&&(b.tracks.push(f),d=document.querySelectorAll(".soundTitle__title, .chartTrack__title a, .playableTile__artworkLink, .trackItem__trackTitle"));
setLocalStorage(function(){if(chrome.runtime.lastError)alert("Error settings:\n\n"+chrome.runtime.lastError);else{document.querySelector(".sc-button-more.sc-button.sc-button-active").click();for(var a=d.length,b=0;b<a;b++)if(d[b].href===k){var c=moreActionParentClassName(d[b]);d[b].closest(c).remove()}}},{filter:b})})};a.removeEventListener("click",b);a.addEventListener("click",b)},addTagToFilter=function(a){var c=function(){getLocalStorage(function(b){var c=a.getAttribute("data-item");b=b.tagsArray||
[];b.push(c);setLocalStorage(function(){var a=document.querySelectorAll(".soundTitle__tagContent"),b=a.length;if(chrome.runtime.lastError)alert("Error settings:\n\n"+chrome.runtime.lastError);else{document.querySelector(".sc-button-more.sc-button.sc-button-active").click();for(var d=0;d<b;d++)if(a[d].innerText.toUpperCase()===c.toUpperCase()){var h=moreActionParentClassName(a[d]);a[d].closest(h).remove()}}},{tagsArray:b})},["tagsArray"])};a.removeEventListener("click",c);a.addEventListener("click",
c)},eliminateDuplicates=function(a){var c,b=[],d=a.length,e={};for(c=0;c<d;c++)e[a[c]]=0;for(c in e)b.push(c);return b},exportimportInit=function(a){a=document.querySelector('#yellowcloud-import input[type="file"]');document.querySelector("#yellowcloud-export a").addEventListener("click",function(){getLocalStorage(function(a){var b=new Blob([JSON.stringify(a,null,"\t")],{type:"application/json"});a=document.createElement("a");b=window.URL.createObjectURL(b);document.body.appendChild(a);a.style="display: none";
a.href=b;a.download="YellowCloud.json";a.click();window.URL.revokeObjectURL(b)})});var c=function(a){a=JSON.parse(a.target.result);for(var c=Object.keys(a),b=c.length,k={},f=0;f<b;f++)switch(c[f]){case "discoverModules":Object.keys(a.discoverModules);var h={},g;for(g in a.discoverModules)isNaN(g)||(h[g]="1"==a.discoverModules[g]?"1":"0");k.discoverModules=h;break;case "displayType":k.displayType="list"===a.displayType||"grid"===a.displayType?a.displayType:"default";break;case "filter":for(var h=[a.filter.artists,
a.filter.tracks],p=h.length,l={},r=0;r<p;r++){var t=[],x;for(x in h[r]){var q=h[r][x],v=q.slug,w=q.time;if(v){w||(q.time=Math.floor(Date.now()/1E3));for(var w=t.length,z=0,u=0;u<w;u++)t[u].slug===v&&(z=1);0==z&&t.push(q)}}0==r?l.artists=t:l.tracks=t}k.filter=l;break;case "tagsArray":h=a.tagsArray.length;p=[];for(l=0;l<h;l++)p.push(a.tagsArray[l].toLowerCase());k.tagsArray=eliminateDuplicates(p);break;case "moreActionMenu":var h={},A;for(A in a.moreActionMenu)h[A]="on"==a.moreActionMenu[A]?a.moreActionMenu[A]:
"off";k.moreActionMenu=h;break;default:h=a[c[f]],"on"!=h&&(h="off"),k[c[f]]=h}setLocalStorage(function(){chrome.runtime.lastError?alert("Error settings:\n\n"+chrome.runtime.lastError):location.reload()},k)};a.addEventListener("change",function(a){a=a.target.files;var b=new FileReader;b.onload=c;b.readAsText(a[0])},!1)},manageFooterEnhancerButton=function(a){a=void 0===a?!1:a;var c=document.querySelector("#yellowcloud-button"),b=document.querySelector(".playControls__inner");!0===a?c&&(c.remove(),
_body.removeAttribute("settings-button"),settingsMenu()):c||(debugMode&&console.log("-> YellowCloud button (Bottom) rendered"),_body.setAttribute("settings-button",""),a=document.createElement("div"),c=document.createElement("button"),a.id="yellowcloud-container",c.className="yellowcloud-settings-button sc-button sc-button-medium sc-button-responsive",c.id="yellowcloud-button",c.tabindex="0",c.innerText="YellowCloud",a.appendChild(c),b.appendChild(a),settingsMenu())},manageHeaderEnhancerButton=function(a){a=
void 0===a?!1:a;var c=document.querySelector(".profileMenu__list.profileMenu__enhancer.sc-list-nostyle"),b=document.querySelector(".header__userNavUsernameButton");if(!0===a)b.removeEventListener("click",manageHeaderEnhancerButton),c&&c.remove(),settingsMenu();else if(!c){b.removeEventListener("click",manageHeaderEnhancerButton);if(document.querySelector(".dropdownMenu.g-z-index-header-menu")){debugMode&&console.log("-> YellowCloud button (Top) rendered");a=document.querySelector(".profileMenu");
var c=document.createElement("ul"),d=document.createElement("li"),e=document.createElement("a");c.className="profileMenu__list profileMenu__enhancer yellowcloud-settings-button sc-list-nostyle";d.className="profileMenu__item";e.className="profileMenu__link profileMenu__enhancerMenu";e.innerText="YellowCloud";d.appendChild(e);c.appendChild(d);a.appendChild(c)}settingsMenu();var k=setInterval(function(){document.querySelector(".profileMenu__list.profileMenu__enhancer.sc-list-nostyle")||(settingsMenu(),
clearInterval(k),b.addEventListener("click",manageHeaderEnhancerButton))},100)}},settingsInit=function(){debugMode&&console.log("callback settingsInit: Initializing");for(var a=document.querySelector("#darkMode"),c=document.querySelector("#listenerMode"),b=document.querySelector("#fullwidthMode"),d=document.querySelector("#profileImages"),e=document.querySelector("#hideSidebar"),k=document.querySelector("#hideBranding"),f=document.querySelector("#hideHeaderMenu"),h=document.querySelector("#hideFooterMenu"),
g=document.querySelectorAll('input[name="displayType"]'),p=document.querySelector("#removePreviews"),l=document.querySelector("#removePlaylists"),r=document.querySelector("#removeLongTracks"),t=document.querySelector("#removeUserActivity"),x=document.querySelector("#removeReposts"),q=document.querySelector("#relatedActionMenu"),v=document.querySelector("#tagActionMenu"),w=document.querySelector("#artistActionMenu"),z=document.querySelector("#trackActionMenu"),u=document.querySelector("#hiddenOutline"),
A=document.querySelector("#disableUnfollower"),D=document.querySelector("#disableDiscoverToggle"),B=document.querySelector("#yellowcloud-reset"),y=document.querySelectorAll(".yellowcloud-close-settings"),E=y.length,H=[a,c,b,d,e,k,f,h,g[0],g[1],g[2],p,l,r,t,x,q,v,w,z,u,A,D],G=0;G<E;G++)y[G].addEventListener("click",function(){return disassembleSettings()});document.addEventListener("mousedown",function(a){var c=null===a?event:a;1!==c.which&&0!==c.button&&1!==c.button||"yellowcloud"!==a.target.id||
disassembleSettings()});B.addEventListener("click",function(){"true"===B.getAttribute("warning")?resetLocalStorage(function(){return location.reload()}):(B.setAttribute("warning",!0),B.innerText="Are you sure you want to reset?",setTimeout(function(){B.setAttribute("warning",!1);B.innerText="Reset all YellowCloud settings"},5E3))});getLocalStorage(function(m){"on"===m.darkMode&&(a.checked=!0);"on"===m.listenerMode&&(c.checked=!0);"on"===m.fullwidthMode&&(b.checked=!0);"on"===m.profileImages&&(d.checked=
!0);"on"===m.hideSidebar&&(e.checked=!0);"on"===m.hideBranding&&(k.checked=!0);m.settingsMenus?("on"===m.settingsMenus.hideHeaderMenu&&(f.checked=!0),"on"===m.settingsMenus.hideFooterMenu&&(h.checked=!0)):setLocalStorage(function(){debugMode&&console.log("-> Setting updated: settingsMenus (Default)")},{settingsMenus:_defaultMenus});"list"===m.displayType?g[1].checked=!0:"grid"===m.displayType?g[2].checked=!0:g[0].checked=!0;"on"===m.removePreviews&&(p.checked=!0);"on"===m.removePlaylists&&(l.checked=
!0);"on"===m.removeLongTracks&&(r.checked=!0);"on"===m.removeUserActivity&&(t.checked=!0);"on"===m.removeReposts&&(x.checked=!0);m.moreActionMenu&&("on"===m.moreActionMenu.relatedActionMenu&&(q.checked=!0),"on"===m.moreActionMenu.tagActionMenu&&(v.checked=!0),"on"===m.moreActionMenu.artistActionMenu&&(w.checked=!0),"on"===m.moreActionMenu.trackActionMenu&&(z.checked=!0));"on"===m.hiddenOutline&&(u.checked=!0);"on"===m.disableUnfollower&&(A.checked=!0);"on"===m.disableDiscoverToggle&&(D.checked=!0)});
var F=function(a,c){"on"!==a&&document.querySelectorAll(".lazyLoadingList > ul, .lazyLoadingList > div > ul").forEach(function(a){a.childNodes.forEach(function(a){var b=a.getAttribute("data-type");b&&b===c&&(a.classList.remove("hidden"),a.removeAttribute("data-type"),a.removeAttribute("data-skip"))})});frontEndStreamManipulation(!0)},n=function(a,c,b,d){b=void 0===b?null:b;d=void 0===d?null:d;getLocalStorage(function(C){var e={},f=c.split("."),g="on",h=C[c];c.match(/[.]/)&&(h=C[f[0]][f[1]]);"on"===
h&&(g="off");c.match(/[.]/)?(e[f[0]]=C[f[0]],"settingsMenus"===f[0]?"hideHeaderMenu"===f[1]?e[f[0]].hideHeaderMenu=g:"hideFooterMenu"===f[1]&&(e[f[0]].hideFooterMenu=g):"moreActionMenu"===f[0]&&("relatedActionMenu"===f[1]?e[f[0]].relatedActionMenu=g:"tagActionMenu"===f[1]?e[f[0]].tagActionMenu=g:"artistActionMenu"===f[1]?e[f[0]].artistActionMenu=g:"trackActionMenu"===f[1]&&(e[f[0]].trackActionMenu=g))):e[c]="displayType"===c?a.value:g;setLocalStorage(function(){debugMode&&console.log(e);if("displayType"===
c)_body.setAttribute("displaytype",a.value);else if("hideHeaderMenu"===f[1]||"hideFooterMenu"===f[1])"on"===g?b(!0):b();else if(d)b(g,d);else{var C=c.toLowerCase();"on"===g?_body.setAttribute(C,""):_body.removeAttribute(C)}},e)})};H.forEach(function(m){m.addEventListener("change",function(){match(m).on(function(c){return c===a},function(a){return n(a,"darkMode")}).on(function(a){return a===c},function(a){return n(a,"listenerMode")}).on(function(a){return a===b},function(a){return n(a,"fullwidthMode")}).on(function(a){return a===
d},function(a){return n(a,"profileImages")}).on(function(a){return a===e},function(a){return n(a,"hideSidebar")}).on(function(a){return a===k},function(a){return n(a,"hideBranding")}).on(function(a){return a===f},function(a){return n(a,"settingsMenus.hideHeaderMenu",manageHeaderEnhancerButton)}).on(function(a){return a===h},function(a){return n(a,"settingsMenus.hideFooterMenu",manageFooterEnhancerButton)}).on(function(a){return a===g[0]},function(a){return n(a,"displayType")}).on(function(a){return a===
g[1]},function(a){return n(a,"displayType")}).on(function(a){return a===g[2]},function(a){return n(a,"displayType")}).on(function(a){return a===p},function(a){return n(a,"removePreviews",F,"preview")}).on(function(a){return a===l},function(a){return n(a,"removePlaylists",F,"preview")}).on(function(a){return a===r},function(a){return n(a,"removeLongTracks",F,"long")}).on(function(a){return a===t},function(a){return n(a,"removeUserActivity",F,"yours")}).on(function(a){return a===x},function(a){return n(a,
"removeReposts",F,"repost")}).on(function(a){return a===q},function(a){return n(a,"moreActionMenu.relatedActionMenu")}).on(function(a){return a===v},function(a){return n(a,"moreActionMenu.tagActionMenu")}).on(function(a){return a===w},function(a){return n(a,"moreActionMenu.artistActionMenu")}).on(function(a){return a===z},function(a){return n(a,"moreActionMenu.trackActionMenu")}).on(function(a){return a===u},function(a){return n(a,"hiddenOutline")}).on(function(a){return a===A},function(a){return n(a,
"disableUnfollower")}).on(function(a){return a===D},function(a){return n(a,"disableDiscoverToggle")})})})},filterInit=function(){debugMode&&console.log("callback filterInit: Initializing");var a=document.querySelector("#artist-blacklist"),c=document.querySelector("#track-blacklist"),b=document.querySelector("#playlist-blacklist"),d=document.querySelector("#skipTags");getLocalStorage(function(a){null!=a.tagsArray&&(d.value=a.tagsArray);insignia(d,{delimiter:",",deletion:!0});a=document.querySelector(".nsg-tags");
runObserver(a,function(){for(var a=document.querySelectorAll(".nsg-tag"),c=a.length,b=[],d=0;d<c;d++)b.push(a[d].innerText);setLocalStorage(function(){chrome.runtime.lastError&&alert("Error while saving settings:\n\n"+chrome.runtime.lastError);debugMode&&console.log("Tag array saved: "+b)},{tagsArray:b})},!0)});var e=function(a){a=a.split("/");var c=a[0];"sets"==a[1]?c=a[2]:a[1]&&(c=a[1]);c=c.replace(/-/g," ");return c=c.replace(/_/g," ")},k=function(a,c){getLocalStorage(function(b){var d=[],f=0,
g=function(a){for(var c=[],b=0;b<f;b++)!0===a&&isPlaylistURL(d[b].slug)&&c.push(d[b]),!1===a&&(isPlaylistURL(d[b].slug)||c.push(d[b]));d=c},k=function(a,c,b){for(var d=a.length;d--;)a[d]&&a[d].hasOwnProperty(c)&&a[d][c]===b&&a.splice(d,1);return a};b.filter&&(d=b.filter.tracks,f=d.length,"artists"==c&&b.filter.artists?(d=b.filter.artists,f=d.length):"tracks"==c&&b.filter.tracks?g(!1):g(!0));if(0===f)b=document.createElement("span"),b.innerHTML="No "+c+" has been filtered!",a.appendChild(b);else for(b=
{i:0};b.i<f;b={i:b.i,_listItemDelete:b._listItemDelete},b.i++){var g=document.createElement("li"),h=document.createElement("span"),q=document.createElement("a"),v=document.createElement("div"),w=document.createElement("span");b._listItemDelete=document.createElement("span");var z=b.i+1;h.className="yellowcloud-filter-item-order";h.innerText="#"+z;v.className="yellowcloud-filter-actions";q.className="yellowcloud-filter-item-name";q.href="https://soundcloud.com/"+d[b.i].slug;q.innerText=e(d[b.i].slug);
q.target="_blank";w.innerText=relativeTime(d[b.i].time);w.className="yellowcloud-filter-option";b._listItemDelete.className="yellowcloud-filter-option-remove";g.appendChild(h);g.appendChild(q);v.appendChild(w);v.appendChild(b._listItemDelete);g.appendChild(v);a.appendChild(g);b._listItemDelete.addEventListener("click",function(a){return function(){getLocalStorage(function(b){b=b.filter;"artists"===c?k(b.artists,"slug",d[a.i].slug):k(b.tracks,"slug",d[a.i].slug);setLocalStorage(function(){a._listItemDelete.closest("li").remove();
for(var b=document.querySelectorAll(".filter-container"),d=b.length,e=0;e<d;e++)if(!b[a.i].hasChildNodes()){var f=document.createElement("span");f.innerHTML="No "+c+" has been filtered!";b[e].appendChild(f)}},{filter:b})},["filter"])}}(b))}})};k(a,"artists");k(c,"tracks");k(b,"playlists")},readyStateCheck=function(){setAttributes();settingsSetup();injectedJavascript()};document.addEventListener("readystatechange",readyStateCheck);
setInterval(function(){location.href!=oldLocation&&(debugMode&&console.log("-=- NEW PAGE LOADED -=-"),oldLocation=location.href,readyStateCheck())},100);
var setAttributes=function(){debugMode&&console.log("function setAttributes: Initializing");getLocalStorage(function(a){"on"===a.darkMode&&_body.setAttribute("darkmode","");"on"===a.listenerMode&&_body.setAttribute("listenermode","");"on"===a.fullwidthMode&&_body.setAttribute("fullwidthmode","");"on"===a.profileImages&&_body.setAttribute("profileimages","");"on"===a.hideSidebar&&_body.setAttribute("hidesidebar","");"on"===a.hideBranding&&_body.setAttribute("hidebranding","");"list"===a.displayType?
_body.setAttribute("displaytype","list"):"grid"===a.displayType?_body.setAttribute("displaytype","grid"):_body.setAttribute("displaytype","default");"on"===a.hiddenOutline&&_body.setAttribute("hiddenoutline","")})};setAttributes();
var settingsSetup=function(){debugMode&&console.log("function settingsSetup: Initializing");var a=document.querySelector("#stream-controller"),c=document.querySelector("#version-display"),b=document.querySelector(".playControls");document.querySelector(".playControls__inner");var d=document.querySelector(".announcements.g-z-index-fixed-top"),e=document.querySelector(".header__userNavUsernameButton"),k=document.querySelector(".header__logo.left");b.className="playControls g-z-index-header m-visible";
d.className="announcements g-z-index-fixed-top m-offset";k.id="yellowcloud-logo";c||(debugMode&&console.log("-> Branding rendered"),c=document.createElement("span"),c.id="version-display",c.innerText=_manifestData.version,k.appendChild(c));getLocalStorage(function(b){"undefined"!==typeof b.settingsMenus&&"on"===b.settingsMenus.hideFooterMenu||manageFooterEnhancerButton();"undefined"!==typeof b.settingsMenus&&"on"===b.settingsMenus.hideHeaderMenu||e.addEventListener("click",manageHeaderEnhancerButton);
var c=setInterval(function(){var a=document.querySelector("ul.profileTabs.g-tabs");if(a&&!document.querySelector("#profile-tab-like")){debugMode&&console.log("-> Like shortcut rendered");clearInterval(c);var b=a.querySelector(".g-tabs-link:first-child").getAttribute("href"),d=document.createElement("li"),e=document.createElement("a");d.className="g-tabs-item";d.id="profile-tab-like";e.className="g-tabs-link";e.href=b+"/likes";e.innerText="Likes";d.appendChild(e);a.appendChild(d)}},100);if("on"!=b.disableDiscoverToggle&&
"https://soundcloud.com/discover"==location.href)var d=setInterval(function(){var a=document.querySelector("div.modularHome.lazyLoadingList ul.lazyLoadingList__list");if(a){clearInterval(d);var b=function(){getLocalStorage(function(b){debugMode&&console.log("function discoverModuleHider: Running");for(var c=a.querySelectorAll(".selectionModule"),d=c.length,e={i:0};e.i<d;e={_moduleSwitch:e._moduleSwitch,i:e.i},e.i++){var f=b.discoverModules||{},g=1==f[e.i]?"hidden":"shown",k=c[e.i].querySelector("h2.selectionModule__titleText"),
h=k.querySelector("a.hide-discover-section");c[e.i].setAttribute("state",g);h||(g=1==f[e.i]?0:1,f=1==f[e.i]?"Show this section":"Hide this section",h=document.createElement("a"),h.className="hide-discover-section",h.innerText=f,h.setAttribute("section-id",e.i),h.setAttribute("section-state",g),k.appendChild(h),e._moduleSwitch=document.querySelector('.hide-discover-section[section-id="'+e.i+'"]'),e._moduleSwitch.addEventListener("click",function(a){return function(){getLocalStorage(function(b){var c=
a._moduleSwitch.getAttribute("section-id"),d=a._moduleSwitch.getAttribute("section-state"),e=b.discoverModules||{};e[c]=d;setLocalStorage(function(){if(chrome.runtime.lastError)alert("Error while saving settings:\n\n"+chrome.runtime.lastError);else{var b=1==e[c]?"Show this section":"Hide this section",d=1==e[a.i]?"hidden":"shown",f=1==e[c]?0:1,g=a._moduleSwitch.closest(".selectionModule");a._moduleSwitch.innerText=b;a._moduleSwitch.setAttribute("section-state",f);g.setAttribute("state",d)}},{discoverModules:e})})}}(e)))}})};
b();runObserver(a,b)}},100);if("https://soundcloud.com/stream"==location.href)var f=setInterval(function(){var c=document.querySelector(".stream__header");if(c&&(clearInterval(f),!a)){var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("h3"),k=document.createElement("ul"),h=document.createElement("li"),l=document.createElement("li"),u=document.createElement("li");d.className="stream__controls";d.id="stream-controller";e.className="listDisplayToggle g-flex-row-centered";
g.className="listDisplayToggleTitle sc-text-light sc-type-medium";g.innerText="View";k.className="listDisplayToggle sc-list-nostyle g-flex-row-centered";h.className="listDisplayToggle setting-display-tile default-icon";h.title="Default";h.setAttribute("data-id","default");l.className="listDisplayToggle setting-display-tile list-icon";l.title="Compact";l.setAttribute("data-id","list");u.className="listDisplayToggle setting-display-tile grid-icon";u.title="Grid";u.setAttribute("data-id","grid");e.appendChild(g);
k.appendChild(h);k.appendChild(l);k.appendChild(u);e.appendChild(k);d.appendChild(e);c.appendChild(d);var p=document.querySelector(".listDisplayToggle.setting-display-tile.default-icon"),D=document.querySelector(".listDisplayToggle.setting-display-tile.list-icon"),B=document.querySelector(".listDisplayToggle.setting-display-tile.grid-icon");"list"===b.displayType?D.classList.add("active"):"grid"===b.displayType?B.classList.add("active"):p.classList.add("active");for(var y=document.querySelectorAll(".listDisplayToggle.setting-display-tile"),
E=y.length,c={i:0};c.i<E;c={i:c.i},c.i++)y[c.i].addEventListener("click",function(a){return function(){for(var b=y[a.i].getAttribute("data-id"),c=0;c<E;c++)y[c].classList.remove("active");"list"===b?(_body.setAttribute("displaytype","list"),D.classList.add("active")):"grid"===b?(_body.setAttribute("displaytype","grid"),B.classList.add("active")):(_body.setAttribute("displaytype","default"),p.classList.add("active"));setLocalStorage(function(){chrome.runtime.lastError&&alert("Error while saving settings:\n\n"+
chrome.runtime.lastError);debugMode&&console.log("-> Display mode saved: "+b)},{displayType:b})}}(c))}},100);if("https://soundcloud.com/you/following"==location.href&&"on"!==b.disableUnfollower)var k=setInterval(function(){var a=document.querySelector(".collectionSection__list .lazyLoadingList.badgeList ul.lazyLoadingList__list");if(a){clearInterval(k);var b=document.querySelector(".collectionSection__top");if(null==document.querySelector("#mass-unfollow")){var c=document.createElement("div"),d=document.createElement("div"),
e=document.createElement("h3"),f=document.createElement("button"),g=document.createElement("button"),h=document.createElement("button");c.className="stream__controls";c.id="mass-unfollow";d.className="g-flex-row-centered";e.className="sc-text-light sc-type-medium margin-spacing";e.innerText="Options:";f.className="sc-button margin-spacing";f.id="confirm-unfollow-button";f.innerText="Mass unfollow";g.className="sc-button margin-spacing";g.id="undo-unfollow-button";g.innerText="Reset selection";h.className=
"sc-button";h.id="all-unfollow-button";h.innerText="Select all";d.appendChild(e);d.appendChild(f);d.appendChild(g);d.appendChild(h);c.appendChild(d);insertAfter(c,b);b.style.margin="0px"}multiFollow();runObserver(a,multiFollow);var l=document.querySelector("#confirm-unfollow-button"),a=document.querySelector("#undo-unfollow-button"),b=document.querySelector("#all-unfollow-button");l.addEventListener("click",function(){for(var a=0,b=document.querySelectorAll(".badgeList__item"),c=b.length,d=0;d<c;d++)1==
b[d].querySelector("label.userBadgeListItem__checkbox input.sc-checkbox-input").checked&&(b[d].querySelector(".userBadgeListItem .userBadgeListItem__action button.sc-button-follow").click(),a++);l.innerText=1===a?"1 account got unfollowed!":a+" accounts got unfollowed!";setTimeout(function(){return l.innerText="Mass unfollow"},3E3)});a.addEventListener("click",function(){return massSelector(!1)});b.addEventListener("click",function(){return massSelector(!0)})}},100)})},renderSettings=function(){debugMode&&
console.log("function renderSettings: Initializing");_body.className="g-overflow-hidden";_body.style.paddingRight="0px";_app.className="g-filter-grayscale";var a=document.createElement("div"),c=document.createElement("button"),b=document.createElement("div"),d=document.createElement("div"),e=document.createElement("h1"),k=document.createElement("span"),f=document.createElement("ul"),h=document.createElement("li"),g=document.createElement("li"),p=document.createElement("li"),l=document.createElement("li"),
r=document.createElement("ul"),t=document.createElement("li"),x=document.createElement("label"),q=document.createElement("input"),v=document.createElement("li"),w=document.createElement("a"),z=document.createElement("a"),u=document.createElement("a"),A=document.createElement("a"),D=document.createElement("a"),B=document.createElement("a"),y=document.createElement("div"),E=document.createElement("div"),H=document.createElement("div"),G=document.createElement("div"),F=document.createElement("div"),
n=document.createElement("hr"),m=document.createElement("span"),C=document.createElement("a");a.id="yellowcloud";a.className="modal g-z-index-modal-background g-opacity-transition g-z-index-overlay modalWhiteout showBackground invisible";a.style.paddingRight="0px";a.style.outline="none";a.style.overflow="hidden";a.tabindex="-1";c.className="modal__closeButton yellowcloud-close-settings";c.title="Close";c.type="button";c.innerText="Close";b.className="modal__modal sc-border-box g-z-index-modal-content";
d.className="modal__content";e.id="yellowcloud-title";e.className="g-modal-title-h1 sc-truncate";e.innerText="YellowCloud Settings "+_manifestData.version;k.className="credits";k.innerHTML="Made with <span class='heart'>&hearts;</span> in Denmark by <a href='https://twitter.com/DapperBenji' target='_blank'>@DapperBenji</a>.";f.id="tab-container";f.className="g-tabs g-tabs-small";h.className="g-tabs-item";g.className="g-tabs-item";p.className="g-tabs-item";l.className="g-tabs-item";r.className="g-side-items";
t.className="g-tabs-item";t.id="yellowcloud-import";q.className="hidden";q.type="file";q.accept=".json";v.className="g-tabs-item";v.id="yellowcloud-export";w.setAttribute("action","settings");w.className="tab g-tabs-link active";w.innerText="Settings";z.setAttribute("action","filter");z.className="tab g-tabs-link";z.innerText="Filter (beta)";u.setAttribute("action","changelog");u.className="tab g-tabs-link";u.innerText="Changelog";A.setAttribute("action","about");A.className="tab g-tabs-link";A.innerText=
"About";D.className="g-tabs-link";D.innerText="Import";B.className="g-tabs-link";B.innerText="Export";y.id="yellowcloud-settings-content";E.className="tabPage";E.id="settings";E.style.display="block";H.className="tabPage";H.id="filter";G.className="tabPage";G.id="changelog";F.className="tabPage";F.id="about";m.className="donation";C.href="https://www.paypal.me/BenjaminBachJensen";C.innerText="Buy me a cup of coffee ;)";C.target="_blank";y.appendChild(E);y.appendChild(H);y.appendChild(G);y.appendChild(F);
h.appendChild(w);g.appendChild(z);p.appendChild(u);l.appendChild(A);x.appendChild(D);x.appendChild(q);t.appendChild(x);v.appendChild(B);r.appendChild(t);r.appendChild(v);f.appendChild(h);f.appendChild(g);f.appendChild(p);f.appendChild(l);f.appendChild(r);m.appendChild(C);d.appendChild(e);d.appendChild(k);d.appendChild(f);d.appendChild(y);d.appendChild(n);d.appendChild(m);b.appendChild(d);a.appendChild(c);a.appendChild(b);_body.appendChild(a);setTimeout(function(){a.classList.remove("invisible")},
10);setTimeout(function(){a.style.overflow=null},400);fetchFile(E,"/assets/html/settings.html",settingsInit);fetchFile(H,"/assets/html/filter.html",filterInit);fetchFile(G,"/assets/html/changelog.html");fetchFile(F,"/assets/html/about.html");for(var I=document.querySelectorAll(".tab"),J=I.length,c={i:0};c.i<J;c={i:c.i},c.i++)I[c.i].addEventListener("click",function(a){return function(){for(var b=0;b<J;b++)I[b].className="tab g-tabs-link";I[a.i].className="tab g-tabs-link active";for(var b=document.querySelectorAll(".tabPage"),
c=b.length,d=0;d<c;d++)b[d].style.display="none";b=I[a.i].getAttribute("action");document.getElementById(b).style.display="block"}}(c));getLocalStorage(exportimportInit)},settingsMenu=function(){debugMode&&console.log("function settingsMenu: Initializing");for(var a=document.querySelectorAll(".yellowcloud-settings-button"),c=a.length,b=0;b<c;b++)a[b].removeEventListener("click",renderSettings),a[b].addEventListener("click",renderSettings)},runFilters=function(){getLocalStorage(function(a){for(var c=
["tag","artist","track"],b=c.length,d={filter:0};d.filter<b;d={filter:d.filter},d.filter++){var e=null,k=null,f=function(a,b,c){stripLinkDomain(b.href)===c.slug&&a()};switch(c[d.filter]){case "tag":e=document.querySelectorAll(".soundTitle__tagContent");a.tagsArray&&(k=a.tagsArray);f=function(a,b,c){b.innerText.toUpperCase()==c.toUpperCase()&&a(c)};break;case "artist":e=document.querySelectorAll(".soundTitle__username");a.filter&&a.filter.artists&&(k=a.filter.artists);break;case "track":e=document.querySelectorAll(".soundTitle__title"),
a.filter&&a.filter.tracks&&(k=a.filter.tracks)}if(e&&k)for(var h=e.length,g=k.length,p=0;p<h;p++)for(var l={},r=0;r<g;l={_parentElement:l._parentElement},r++){var t=moreActionParentClassName(e[p]);l._parentElement=e[p].closest(t);f(function(a,b){return function(d){d=void 0===d?null:d;a._parentElement.setAttribute("data-skip","true");a._parentElement.setAttribute("data-type","custom_filter");d?a._parentElement.setAttribute("banned-"+c[b.filter]+"",d):a._parentElement.setAttribute("banned-"+c[b.filter]+
"","");a._parentElement.classList.add("hidden")}}(l,d),e[p],k[r])}}},["filter","tagsArray"])},hidePlaylists=function(){debugMode&&console.log("function markPlaylists: Running");for(var a=document.querySelectorAll(".soundList__item .activity div.sound.streamContext"),c=a.length,b=0;b<c;b++)if(1==a[b].className.includes("playlist")){var d;d=a[b].querySelectorAll(".compactTrackList__listContainer .compactTrackList__item");if(5>d.length)d=d.length;else{var e=a[b].querySelector(".compactTrackList__moreLink");
d=e?e.innerText.replace(/\D/g,""):d.length}e=a[b].closest(".soundList__item");e.setAttribute("data-skip","true");e.setAttribute("data-type","playlist");e.setAttribute("data-count",d);e.classList.add("hidden")}},hidePreviews=function(){debugMode&&console.log("function hidePreviews: Running");for(var a=document.querySelectorAll(".sc-snippet-badge.sc-snippet-badge-medium.sc-snippet-badge-grey"),c=a.length,b=0;b<c;b++)if(a[b].innerHTML){var d=a[b].closest(".soundList__item");d.setAttribute("data-skip",
"true");d.setAttribute("data-type","preview");d.classList.add("hidden")}},hideReposts=function(){debugMode&&console.log("function hideReposts: Running");for(var a=document.querySelectorAll(".soundContext__repost"),c=a.length,b=0;b<c;b++){var d=a[b].closest(".soundList__item");d.setAttribute("data-skip","true");d.setAttribute("data-type","repost");d.classList.add("hidden")}},checkCanvas=function(){debugMode&&console.log("function checkCanvas: Running");for(var a=document.querySelectorAll(".sound__waveform .waveform .waveform__layer.waveform__scene"),
c=a.length,b=0;b<c;b++)for(var d=a[b].querySelectorAll("canvas.g-box-full.sceneLayer"),e=d.length,k=0;k<e;k++){var f=d[d.length-1],f=f.getContext("2d").getImageData(f.width-27,27,1,1).data;0===f[0]&&0===f[1]&&0===f[2]&&255===f[3]&&(f=a[b].closest(".soundList__item"),f.setAttribute("data-skip","true"),f.setAttribute("data-type","long"),f.classList.add("hidden"))}},checkUserActivity=function(){debugMode&&console.log("function checkUserActivity: Running");for(var a=document.querySelectorAll(".soundContext__usernameLink"),
c=a.length,b=document.querySelector(".header__userNavUsernameButton").getAttribute("href"),d=0;d<c;d++){var e=a[d].getAttribute("href");b==e&&(e=a[d].closest(".soundList__item"),e.setAttribute("data-skip","true"),e.setAttribute("data-type","yours"),e.classList.add("hidden"))}},renderMoreActionCallback=function(a){if(!document.querySelector(".moreActions #yellowcloud-moreActions-group")){var c=moreActionParentClassName(a.target);a=a.target.closest(c);moreActionMenuContent(a)}},renderMoreAction=function(){for(var a=
document.querySelectorAll("button.sc-button-more.sc-button-small"),c=a.length,b=0;b<c;b++)a[b].removeEventListener("click",renderMoreActionCallback),a[b].addEventListener("click",renderMoreActionCallback)},frontEndStreamManipulation=function(a){!0===(void 0===a?!1:a)&&observer.disconnect();getLocalStorage(function(a){var b=document.querySelectorAll(".lazyLoadingList > ul, .lazyLoadingList > div > ul"),c=b.length;debugMode&&console.log(b);renderMoreAction();runFilters();"on"===a.removePreviews&&hidePreviews();
"on"===a.removePlaylists&&hidePlaylists();"on"===a.removeReposts&&hideReposts();"on"===a.removeLongTracks&&checkCanvas();"on"===a.removeUserActivity&&checkUserActivity();for(var e=0;e<c;e++)runObserver(b[e],renderMoreAction),runObserver(b[e],runFilters),"on"===a.removePreviews&&runObserver(b[e],hidePreviews),"on"===a.removePlaylists&&runObserver(b[e],hidePlaylists),"on"===a.removeReposts&&runObserver(b[e],hideReposts),"on"===a.removeLongTracks&&runObserver(b[e],checkCanvas),"on"===a.removeUserActivity&&
runObserver(b[e],checkUserActivity)})},injectedJavascript=function(){debugMode&&console.log("function injectedJavascript: Initializing");var a=document.querySelector(".playbackSoundBadge"),c=document.querySelector(".skipControl__next"),b=document.querySelector(".skipControl__previous"),d=setInterval(function(){document.querySelector(".l-fluid-fixed > .l-main .lazyLoadingList ul, .l-fixed-fluid > .l-main .lazyLoadingList > ul, .l-hero-fluid-fixed .l-main .lazyLoadingList, .l-collection .l-main .lazyLoadingList")&&
(clearInterval(d),frontEndStreamManipulation(),runObserver(a,function(){getLocalStorage(function(a){a=document.querySelectorAll(".soundList__item");for(var d=a.length,e=0;e<d;e++){var h=a[e].getAttribute("data-skip"),g=a[e].getAttribute("data-playlist");a[e].querySelector(".soundTitle__title span");if(1==a[e].querySelector(".activity div.sound.streamContext").className.includes("playing"))if(debugMode&&console.log("Skip song?: "+h),"true"==h)if(b.addEventListener("click",function(){return skipPrevious=
!0}),1==g)if(h=a[e].getAttribute("data-count"),1==skipPrevious)for(g=0;g<h;g++)b.click();else for(g=0;g<h;g++)c.click();else 1==skipPrevious?b.click():c.click();else skipPrevious=!1}})}))},100)};
